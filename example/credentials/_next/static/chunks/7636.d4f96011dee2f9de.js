(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7636],{89854:function(e,t,i){"use strict";let r=i(56639),n=i(76535),s=i(22407),o=i(99080),a=e=>null==e,c=Symbol("encodeFragmentIdentifier");function l(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function h(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?n(e):e}function p(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function d(e){let t=(e=p(e)).indexOf("?");return -1===t?"":e.slice(t+1)}function g(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function f(e,t){l((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let i=function(e){let t;switch(e.arrayFormat){case"index":return(e,i,r)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){r[e]=i;return}void 0===r[e]&&(r[e]={}),r[e][t[1]]=i};case"bracket":return(e,i,r)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){r[e]=i;return}if(void 0===r[e]){r[e]=[i];return}r[e]=[].concat(r[e],i)};case"colon-list-separator":return(e,i,r)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){r[e]=i;return}if(void 0===r[e]){r[e]=[i];return}r[e]=[].concat(r[e],i)};case"comma":case"separator":return(t,i,r)=>{let n="string"==typeof i&&i.includes(e.arrayFormatSeparator),s="string"==typeof i&&!n&&u(i,e).includes(e.arrayFormatSeparator);i=s?u(i,e):i;let o=n||s?i.split(e.arrayFormatSeparator).map(t=>u(t,e)):null===i?i:u(i,e);r[t]=o};case"bracket-separator":return(t,i,r)=>{let n=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!n){r[t]=i?u(i,e):i;return}let s=null===i?[]:i.split(e.arrayFormatSeparator).map(t=>u(t,e));if(void 0===r[t]){r[t]=s;return}r[t]=[].concat(r[t],s)};default:return(e,t,i)=>{if(void 0===i[e]){i[e]=t;return}i[e]=[].concat(i[e],t)}}}(t),r=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return r;for(let n of e.split("&")){if(""===n)continue;let[e,o]=s(t.decode?n.replace(/\+/g," "):n,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:u(o,t),i(u(e,t),o,r)}for(let e of Object.keys(r)){let i=r[e];if("object"==typeof i&&null!==i)for(let e of Object.keys(i))i[e]=g(i[e],t);else r[e]=g(i,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((e,t)=>{let i=r[t];return i&&"object"==typeof i&&!Array.isArray(i)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(i):e[t]=i,e},Object.create(null))}t.extract=d,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";l((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let i=i=>t.skipNull&&a(e[i])||t.skipEmptyString&&""===e[i],r=function(e){switch(e.arrayFormat){case"index":return t=>(i,r)=>{let n=i.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:null===r?[...i,[h(t,e),"[",n,"]"].join("")]:[...i,[h(t,e),"[",h(n,e),"]=",h(r,e)].join("")]};case"bracket":return t=>(i,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:null===r?[...i,[h(t,e),"[]"].join("")]:[...i,[h(t,e),"[]=",h(r,e)].join("")];case"colon-list-separator":return t=>(i,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:null===r?[...i,[h(t,e),":list="].join("")]:[...i,[h(t,e),":list=",h(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return i=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:(n=null===n?"":n,0===r.length)?[[h(i,e),t,h(n,e)].join("")]:[[r,h(n,e)].join(e.arrayFormatSeparator)]}default:return t=>(i,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?i:null===r?[...i,h(t,e)]:[...i,[h(t,e),"=",h(r,e)].join("")]}}(t),n={};for(let t of Object.keys(e))i(t)||(n[t]=e[t]);let s=Object.keys(n);return!1!==t.sort&&s.sort(t.sort),s.map(i=>{let n=e[i];return void 0===n?"":null===n?h(i,t):Array.isArray(n)?0===n.length&&"bracket-separator"===t.arrayFormat?h(i,t)+"[]":n.reduce(r(i),[]).join("&"):h(i,t)+"="+h(n,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[i,r]=s(e,"#");return Object.assign({url:i.split("?")[0]||"",query:f(d(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,i)=>{i=Object.assign({encode:!0,strict:!0,[c]:!0},i);let r=p(e.url).split("?")[0]||"",n=t.extract(e.url),s=Object.assign(t.parse(n,{sort:!1}),e.query),o=t.stringify(s,i);o&&(o=`?${o}`);let a=function(e){let t="",i=e.indexOf("#");return -1!==i&&(t=e.slice(i)),t}(e.url);return e.fragmentIdentifier&&(a=`#${i[c]?h(e.fragmentIdentifier,i):e.fragmentIdentifier}`),`${r}${o}${a}`},t.pick=(e,i,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[c]:!1},r);let{url:n,query:s,fragmentIdentifier:a}=t.parseUrl(e,r);return t.stringifyUrl({url:n,query:o(s,i),fragmentIdentifier:a},r)},t.exclude=(e,i,r)=>{let n=Array.isArray(i)?e=>!i.includes(e):(e,t)=>!i(e,t);return t.pick(e,n,r)}},42611:function(e,t,i){"use strict";i.r(t),i.d(t,{detectEnv:function(){return m},detectOS:function(){return y},formatIOSMobile:function(){return j},formatMobileRegistry:function(){return Q},formatMobileRegistryEntry:function(){return Y},getClientMeta:function(){return D},getCrypto:function(){return A},getCryptoOrThrow:function(){return k},getDappRegistryUrl:function(){return W},getDocument:function(){return R},getDocumentOrThrow:function(){return S},getFromWindow:function(){return I},getFromWindowOrThrow:function(){return x},getLocal:function(){return B},getLocalStorage:function(){return q},getLocalStorageOrThrow:function(){return O},getLocation:function(){return N},getLocationOrThrow:function(){return T},getMobileLinkRegistry:function(){return K},getMobileRegistryEntry:function(){return F},getNavigator:function(){return C},getNavigatorOrThrow:function(){return P},getWalletRegistryUrl:function(){return J},isAndroid:function(){return w},isBrowser:function(){return E},isIOS:function(){return _},isMobile:function(){return v},isNode:function(){return b},mobileLinkChoiceKey:function(){return $},removeLocal:function(){return z},safeJsonParse:function(){return M},safeJsonStringify:function(){return U},saveMobileLinkInfo:function(){return V},setLocal:function(){return L}});var r=i(76664),n=i(55548),s=i(68571),o=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var r=Array(e),n=0,t=0;t<i;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,n++)r[n]=s[o];return r},a=function(e,t,i){this.name=e,this.version=t,this.os=i,this.type="browser"},c=function(e){this.version=e,this.type="node",this.name="node",this.os=s.platform},l=function(e,t,i,r){this.name=e,this.version=t,this.os=i,this.bot=r,this.type="bot-device"},h=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},u=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},p=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,d=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],g=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(e){var t=""!==e&&d.reduce(function(t,i){var r=i[0],n=i[1];if(t)return t;var s=n.exec(e);return!!s&&[r,s]},!1);if(!t)return null;var i=t[0],r=t[1];if("searchbot"===i)return new h;var n=r[1]&&r[1].split(/[._]/).slice(0,3);n?n.length<3&&(n=o(n,function(e){for(var t=[],i=0;i<e;i++)t.push("0");return t}(3-n.length))):n=[];var s=n.join("."),c=function(e){for(var t=0,i=g.length;t<i;t++){var r=g[t],n=r[0];if(r[1].exec(e))return n}return null}(e),u=p.exec(e);return u&&u[1]?new l(i,s,c,u[1]):new a(i,s,c)}function m(e){return e?f(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new u:"undefined"!=typeof navigator?f(navigator.userAgent):void 0!==s&&s.version?new c(s.version.slice(1)):null}function y(){let e=m();return e&&e.os?e.os:void 0}function w(){let e=y();return!!e&&e.toLowerCase().includes("android")}function _(){let e=y();return!!e&&(e.toLowerCase().includes("ios")||e.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1)}function v(){return!!y()&&(w()||_())}function b(){let e=m();return!!e&&!!e.name&&"node"===e.name.toLowerCase()}function E(){return!b()&&!!C()}let I=n.sD,x=n.$2,S=n.uT,R=n.Me,P=n.Gw,C=n.jW,T=n.UO,N=n.k$,k=n.VQ,A=n.MX,O=n.xP,q=n.$o;function D(){return r.D()}let M=function(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return JSON.parse(e)}catch(t){return e}},U=function(e){return"string"==typeof e?e:JSON.stringify(e)};function L(e,t){let i=U(t),r=q();r&&r.setItem(e,i)}function B(e){let t=null,i=q();return i&&(t=i.getItem(e)),t?M(t):t}function z(e){let t=q();t&&t.removeItem(e)}let $="WALLETCONNECT_DEEPLINK_CHOICE";function j(e,t){let i=encodeURIComponent(e);return t.universalLink?`${t.universalLink}/wc?uri=${i}`:t.deepLink?`${t.deepLink}${t.deepLink.endsWith(":")?"//":"/"}wc?uri=${i}`:""}function V(e){let t=e.href.split("?")[0];L($,Object.assign(Object.assign({},e),{href:t}))}function F(e,t){return e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))[0]}function K(e,t){let i=e;return t&&(i=t.map(t=>F(e,t)).filter(Boolean)),i}let H="https://registry.walletconnect.com";function J(){return H+"/api/v2/wallets"}function W(){return H+"/api/v2/dapps"}function Y(e,t="mobile"){var i;return{name:e.name||"",shortName:e.metadata.shortName||"",color:e.metadata.colors.primary||"",logo:null!==(i=e.image_url.sm)&&void 0!==i?i:"",universalLink:e[t].universal||"",deepLink:e[t].native||""}}function Q(e,t="mobile"){return Object.values(e).filter(e=>!!e[t].universal||!!e[t].native).map(e=>Y(e,t))}},55548:function(e,t){"use strict";function i(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function r(e){let t=i(e);if(!t)throw Error(`${e} is not defined in Window`);return t}t.$o=t.xP=t.MX=t.VQ=t.k$=t.UO=t.jW=t.Gw=t.Me=t.uT=t.$2=t.sD=void 0,t.sD=i,t.$2=r,t.uT=function(){return r("document")},t.Me=function(){return i("document")},t.Gw=function(){return r("navigator")},t.jW=function(){return i("navigator")},t.UO=function(){return r("location")},t.k$=function(){return i("location")},t.VQ=function(){return r("crypto")},t.MX=function(){return i("crypto")},t.xP=function(){return r("localStorage")},t.$o=function(){return i("localStorage")}},76664:function(e,t,i){"use strict";t.D=void 0;let r=i(45301);t.D=function(){let e,t,i;try{e=r.getDocumentOrThrow(),t=r.getLocationOrThrow()}catch(e){return null}function n(...t){let i=e.getElementsByTagName("meta");for(let e=0;e<i.length;e++){let r=i[e],n=["itemprop","property","name"].map(e=>r.getAttribute(e)).filter(e=>!!e&&t.includes(e));if(n.length&&n){let e=r.getAttribute("content");if(e)return e}}return""}let s=((i=n("name","og:site_name","og:title","twitter:title"))||(i=e.title),i),o=n("description","og:description","twitter:description","keywords");return{description:o,url:t.origin,icons:function(){let i=e.getElementsByTagName("link"),r=[];for(let e=0;e<i.length;e++){let n=i[e],s=n.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){let e=n.getAttribute("href");if(e){if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let i=t.protocol+"//"+t.host;if(0===e.indexOf("/"))i+=e;else{let r=t.pathname.split("/");r.pop(),i+=r.join("/")+"/"+e}r.push(i)}else if(0===e.indexOf("//")){let i=t.protocol+e;r.push(i)}else r.push(e)}}}return r}(),name:s}}},45301:function(e,t){"use strict";function i(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function r(e){let t=i(e);if(!t)throw Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=i,t.getFromWindowOrThrow=r,t.getDocumentOrThrow=function(){return r("document")},t.getDocument=function(){return i("document")},t.getNavigatorOrThrow=function(){return r("navigator")},t.getNavigator=function(){return i("navigator")},t.getLocationOrThrow=function(){return r("location")},t.getLocation=function(){return i("location")},t.getCryptoOrThrow=function(){return r("crypto")},t.getCrypto=function(){return i("crypto")},t.getLocalStorageOrThrow=function(){return r("localStorage")},t.getLocalStorage=function(){return i("localStorage")}},92071:function(e,t,i){"use strict";i.d(t,{r:function(){return s}});var r=i(63606),n=i(7765);class s extends n.IJsonRpcProvider{constructor(e){super(e),this.events=new r.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict((0,n.formatJsonRpcRequest)(e.method,e.params||[],e.id||(0,n.getBigIntRpcId)().toString()),t)}async requestStrict(e,t){return new Promise(async(i,r)=>{if(!this.connection.connected)try{await this.open()}catch(e){r(e)}this.events.on(`${e.id}`,e=>{(0,n.isJsonRpcError)(e)?r(e.error):i(e.result)});try{await this.connection.send(e,t)}catch(e){r(e)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),(0,n.isJsonRpcResponse)(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}},79550:function(e,t,i){var r=i(68571);function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var s=i(42611),o=n(i(98972)),a=n(i(7238)),c=i(44787);"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var l="walletconnect-wrapper",h="walletconnect-style-sheet",u="walletconnect-qrcode-modal",p="walletconnect-qrcode-text";function d(e){return c.createElement("div",{className:"walletconnect-modal__header"},c.createElement("img",{src:"data:image/svg+xml,%3Csvg height='185' viewBox='0 0 300 185' width='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m61.4385429 36.2562612c48.9112241-47.8881663 128.2119871-47.8881663 177.1232091 0l5.886545 5.7634174c2.445561 2.3944081 2.445561 6.2765112 0 8.6709204l-20.136695 19.715503c-1.222781 1.1972051-3.2053 1.1972051-4.428081 0l-8.100584-7.9311479c-34.121692-33.4079817-89.443886-33.4079817-123.5655788 0l-8.6750562 8.4936051c-1.2227816 1.1972041-3.205301 1.1972041-4.4280806 0l-20.1366949-19.7155031c-2.4455612-2.3944092-2.4455612-6.2765122 0-8.6709204zm218.7677961 40.7737449 17.921697 17.546897c2.445549 2.3943969 2.445563 6.2764769.000031 8.6708899l-80.810171 79.121134c-2.445544 2.394426-6.410582 2.394453-8.85616.000062-.00001-.00001-.000022-.000022-.000032-.000032l-57.354143-56.154572c-.61139-.598602-1.60265-.598602-2.21404 0-.000004.000004-.000007.000008-.000011.000011l-57.3529212 56.154531c-2.4455368 2.394432-6.4105755 2.394472-8.8561612.000087-.0000143-.000014-.0000296-.000028-.0000449-.000044l-80.81241943-79.122185c-2.44556021-2.394408-2.44556021-6.2765115 0-8.6709197l17.92172963-17.5468673c2.4455602-2.3944082 6.4105989-2.3944082 8.8561602 0l57.3549775 56.155357c.6113908.598602 1.602649.598602 2.2140398 0 .0000092-.000009.0000174-.000017.0000265-.000024l57.3521031-56.155333c2.445505-2.3944633 6.410544-2.3945531 8.856161-.0002.000034.0000336.000068.0000673.000101.000101l57.354902 56.155432c.61139.598601 1.60265.598601 2.21404 0l57.353975-56.1543249c2.445561-2.3944092 6.410599-2.3944092 8.85616 0z' fill='%233b99fc'/%3E%3C/svg%3E",className:"walletconnect-modal__headerLogo"}),c.createElement("p",null,"WalletConnect"),c.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:e.onClose},c.createElement("div",{id:"walletconnect-qrcode-close",className:"walletconnect-modal__close__icon"},c.createElement("div",{className:"walletconnect-modal__close__line1"}),c.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function g(e){return c.createElement("a",{className:"walletconnect-connect__button",href:e.href,id:"walletconnect-connect-button-"+e.name,onClick:e.onClick,rel:"noopener noreferrer",style:{backgroundColor:e.color},target:"_blank"},e.name)}function f(e){var t=e.color,i=e.href,r=e.name,n=e.logo,s=e.onClick;return c.createElement("a",{className:"walletconnect-modal__base__row",href:i,onClick:s,rel:"noopener noreferrer",target:"_blank"},c.createElement("h3",{className:"walletconnect-modal__base__row__h3"},r),c.createElement("div",{className:"walletconnect-modal__base__row__right"},c.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+n+"') "+t,backgroundSize:"100%"}}),c.createElement("img",{src:"data:image/svg+xml,%3Csvg fill='none' height='18' viewBox='0 0 8 18' width='8' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath clip-rule='evenodd' d='m.586301.213898c-.435947.33907-.5144813.967342-.175411 1.403292l4.87831 6.27212c.28087.36111.28087.86677 0 1.22788l-4.878311 6.27211c-.33907.436-.260536 1.0642.175412 1.4033.435949.3391 1.064219.2605 1.403289-.1754l4.87832-6.2721c.84259-1.08336.84259-2.60034 0-3.68367l-4.87832-6.27212c-.33907-.4359474-.96734-.514482-1.403289-.175412z' fill='%233c4252' fill-rule='evenodd'/%3E%3C/svg%3E",className:"walletconnect-modal__base__row__right__caret"})))}function m(e){var t=e.color,i=e.href,r=e.name,n=e.logo,s=e.onClick,o=window.innerWidth<768?(r.length>8?2.5:2.7)+"vw":"inherit";return c.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:i,onClick:s,rel:"noopener noreferrer",target:"_blank"},c.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+n+"') "+t,backgroundSize:"100%"}}),c.createElement("div",{style:{fontSize:o},className:"walletconnect-connect__button__text"},r))}function y(e){var t=s.isAndroid(),i=c.useState(""),r=i[0],n=i[1],o=c.useState(""),a=o[0],l=o[1],h=c.useState(1),u=h[0],d=h[1],y=a?e.links.filter(function(e){return e.name.toLowerCase().includes(a.toLowerCase())}):e.links,w=e.errorMessage,_=a||y.length>5,v=Math.ceil(y.length/12),b=[(u-1)*12+1,12*u],E=y.length?y.filter(function(e,t){return t+1>=b[0]&&t+1<=b[1]}):[],I=void 0;return c.createElement("div",null,c.createElement("p",{id:p,className:"walletconnect-qrcode__text"},t?e.text.connect_mobile_wallet:e.text.choose_preferred_wallet),!t&&c.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:r,onChange:function(e){n(e.target.value),clearTimeout(I),e.target.value?I=setTimeout(function(){l(e.target.value),d(1)},1e3):(n(""),l(""),d(1))}}),c.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(t?"__android":_&&y.length?"__wrap":"")},t?c.createElement(g,{name:e.text.connect,color:"rgb(64, 153, 255)",href:e.uri,onClick:c.useCallback(function(){s.saveMobileLinkInfo({name:"Unknown",href:e.uri})},[])}):E.length?E.map(function(t){var i=t.color,r=t.name,n=t.shortName,o=t.logo,a=s.formatIOSMobile(e.uri,t),l=c.useCallback(function(){s.saveMobileLinkInfo({name:r,href:a})},[E]);return _?c.createElement(m,{color:i,href:a,name:n||r,logo:o,onClick:l}):c.createElement(f,{color:i,href:a,name:r,logo:o,onClick:l})}):c.createElement(c.Fragment,null,c.createElement("p",null,w.length?e.errorMessage:e.links.length&&!y.length?e.text.no_wallets_found:e.text.loading))),!!(!t&&v>1)&&c.createElement("div",{className:"walletconnect-modal__footer"},Array(v).fill(0).map(function(e,t){var i=t+1,r=u===i;return c.createElement("a",{style:{margin:"auto 10px",fontWeight:r?"bold":"normal"},onClick:function(){return d(i)}},i)})))}function w(e){var t=!!e.message.trim();return c.createElement("div",{className:"walletconnect-qrcode__notification"+(t?" notification__show":"")},e.message)}var _=function(e){try{var t="";return Promise.resolve(o.toString(e,{margin:0,type:"svg"})).then(function(e){return"string"==typeof e&&(t=e.replace("<svg",'<svg class="walletconnect-qrcode__image"')),t})}catch(e){return Promise.reject(e)}};function v(e){var t=c.useState(""),i=t[0],r=t[1],n=c.useState(""),s=n[0],o=n[1];return c.useEffect(function(){try{return Promise.resolve(_(e.uri)).then(function(e){o(e)})}catch(e){Promise.reject(e)}},[]),c.createElement("div",null,c.createElement("p",{id:p,className:"walletconnect-qrcode__text"},e.text.scan_qrcode_with_wallet),c.createElement("div",{dangerouslySetInnerHTML:{__html:s}}),c.createElement("div",{className:"walletconnect-modal__footer"},c.createElement("a",{onClick:function(){a(e.uri)?r(e.text.copied_to_clipboard):r("Error"),setInterval(function(){return r("")},1200)}},e.text.copy_to_clipboard)),c.createElement(w,{message:i}))}function b(e){var t=s.isAndroid(),i=s.isMobile(),r=i?e.qrcodeModalOptions&&e.qrcodeModalOptions.mobileLinks?e.qrcodeModalOptions.mobileLinks:void 0:e.qrcodeModalOptions&&e.qrcodeModalOptions.desktopLinks?e.qrcodeModalOptions.desktopLinks:void 0,n=c.useState(!1),o=n[0],a=n[1],l=c.useState(!1),h=l[0],p=l[1],g=c.useState(!i),f=g[0],m=g[1],w={mobile:i,text:e.text,uri:e.uri,qrcodeModalOptions:e.qrcodeModalOptions},_=c.useState(""),b=_[0],E=_[1],I=c.useState(!1),x=I[0],S=I[1],R=c.useState([]),P=R[0],C=R[1],T=c.useState(""),N=T[0],k=T[1],A=function(){h||o||r&&!r.length||P.length>0||c.useEffect(function(){!function(){try{if(t)return Promise.resolve();a(!0);var n=function(e,t){try{var i=e()}catch(e){return t(e)}return i&&i.then?i.then(void 0,t):i}(function(){var t=e.qrcodeModalOptions&&e.qrcodeModalOptions.registryUrl?e.qrcodeModalOptions.registryUrl:s.getWalletRegistryUrl();return Promise.resolve(fetch(t)).then(function(t){return Promise.resolve(t.json()).then(function(t){var n=t.listings,o=s.getMobileLinkRegistry(s.formatMobileRegistry(n,i?"mobile":"desktop"),r);a(!1),p(!0),k(o.length?"":e.text.no_supported_wallets),C(o);var c=1===o.length;c&&(E(s.formatIOSMobile(e.uri,o[0])),m(!0)),S(c)})})},function(t){a(!1),p(!0),k(e.text.something_went_wrong),console.error(t)});Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}()})};A();var O=i?f:!f;return c.createElement("div",{id:u,className:"walletconnect-qrcode__base animated fadeIn"},c.createElement("div",{className:"walletconnect-modal__base"},c.createElement(d,{onClose:e.onClose}),x&&f?c.createElement("div",{className:"walletconnect-modal__single_wallet"},c.createElement("a",{onClick:function(){return s.saveMobileLinkInfo({name:P[0].name,href:b})},href:b,rel:"noopener noreferrer",target:"_blank"},e.text.connect_with+" "+(x?P[0].name:"")+" ›")):t||o||!o&&P.length?c.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(O?" right__selected":"")},c.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),i?c.createElement(c.Fragment,null,c.createElement("a",{onClick:function(){return m(!1),A()}},e.text.mobile),c.createElement("a",{onClick:function(){return m(!0)}},e.text.qrcode)):c.createElement(c.Fragment,null,c.createElement("a",{onClick:function(){return m(!0)}},e.text.qrcode),c.createElement("a",{onClick:function(){return m(!1),A()}},e.text.desktop))):null,c.createElement("div",null,!f&&(t||o||P.length)?c.createElement(y,Object.assign({},w,{links:P,errorMessage:N})):c.createElement(v,Object.assign({},w)))))}var E={de:{choose_preferred_wallet:"W\xe4hle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterst\xfctzten Wallet",no_wallets_found:"keine Wallet gefunden"},en:{choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},es:{choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera m\xf3vil",scan_qrcode_with_wallet:"Escanea el c\xf3digo QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"C\xf3digo QR",mobile:"M\xf3vil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo sali\xf3 mal",no_supported_wallets:"Todav\xeda no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},fr:{choose_preferred_wallet:"Choisissez votre portefeuille pr\xe9f\xe9r\xe9",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copi\xe9!",connect_with:"Connectez-vous \xe0 l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourn\xe9",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouv\xe9"},ko:{choose_preferred_wallet:"원하는 지갑을 선택하세요",connect_mobile_wallet:"모바일 지갑과 연결",scan_qrcode_with_wallet:"WalletConnect 지원 지갑에서 QR코드를 스캔하세요",connect:"연결",qrcode:"QR 코드",mobile:"모바일",desktop:"데스크탑",copy_to_clipboard:"클립보드에 복사",copied_to_clipboard:"클립보드에 복사되었습니다!",connect_with:"와 연결하다",loading:"로드 중...",something_went_wrong:"문제가 발생했습니다.",no_supported_wallets:"아직 지원되는 지갑이 없습니다",no_wallets_found:"지갑을 찾을 수 없습니다"},pt:{choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se \xe0 carteira m\xf3vel",scan_qrcode_with_wallet:"Ler o c\xf3digo QR com uma carteira compat\xedvel com WalletConnect",connect:"Conectar",qrcode:"C\xf3digo QR",mobile:"M\xf3vel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda n\xe3o h\xe1 carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},zh:{choose_preferred_wallet:"选择你的钱包",connect_mobile_wallet:"连接至移动端钱包",scan_qrcode_with_wallet:"使用兼容 WalletConnect 的钱包扫描二维码",connect:"连接",qrcode:"二维码",mobile:"移动",desktop:"桌面",copy_to_clipboard:"复制到剪贴板",copied_to_clipboard:"复制到剪贴板成功！",connect_with:"通过以下方式连接",loading:"正在加载...",something_went_wrong:"出了问题",no_supported_wallets:"目前还没有支持的钱包",no_wallets_found:"没有找到钱包"},fa:{choose_preferred_wallet:"کیف پول مورد نظر خود را انتخاب کنید",connect_mobile_wallet:"به کیف پول موبایل وصل شوید",scan_qrcode_with_wallet:"کد QR را با یک کیف پول سازگار با WalletConnect اسکن کنید",connect:"اتصال",qrcode:"کد QR",mobile:"سیار",desktop:"دسکتاپ",copy_to_clipboard:"کپی به کلیپ بورد",copied_to_clipboard:"در کلیپ بورد کپی شد!",connect_with:"ارتباط با",loading:"...بارگذاری",something_went_wrong:"مشکلی پیش آمد",no_supported_wallets:"هنوز هیچ کیف پول پشتیبانی شده ای وجود ندارد",no_wallets_found:"هیچ کیف پولی پیدا نشد"}};function I(){var e=s.getDocumentOrThrow(),t=e.getElementById(u);t&&(t.className=t.className.replace("fadeIn","fadeOut"),setTimeout(function(){var t=e.getElementById(l);t&&e.body.removeChild(t)},300))}var x=function(){return void 0!==r&&void 0!==r.versions&&void 0!==r.versions.node};e.exports={open:function(e,t,i){if(console.log(e),x())!function(e){o.toString(e,{type:"terminal"}).then(console.log)}(e);else{var r,n,a,u,p;(n=(r=s.getDocumentOrThrow()).getElementById(h))&&r.head.removeChild(n),(a=r.createElement("style")).setAttribute("id",h),a.innerText=':root {\n  --animation-duration: 300ms;\n}\n\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes fadeOut {\n  from {\n    opacity: 1;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.animated {\n  animation-duration: var(--animation-duration);\n  animation-fill-mode: both;\n}\n\n.fadeIn {\n  animation-name: fadeIn;\n}\n\n.fadeOut {\n  animation-name: fadeOut;\n}\n\n#walletconnect-wrapper {\n  -webkit-user-select: none;\n  align-items: center;\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  user-select: none;\n  width: 100%;\n  z-index: 99999999999999;\n}\n\n.walletconnect-modal__headerLogo {\n  height: 21px;\n}\n\n.walletconnect-modal__header p {\n  color: #ffffff;\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0;\n  align-items: flex-start;\n  display: flex;\n  flex: 1;\n  margin-left: 5px;\n}\n\n.walletconnect-modal__close__wrapper {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  z-index: 10000;\n  background: white;\n  border-radius: 26px;\n  padding: 6px;\n  box-sizing: border-box;\n  width: 26px;\n  height: 26px;\n  cursor: pointer;\n}\n\n.walletconnect-modal__close__icon {\n  position: relative;\n  top: 7px;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform: rotate(45deg);\n}\n\n.walletconnect-modal__close__line1 {\n  position: absolute;\n  width: 100%;\n  border: 1px solid rgb(48, 52, 59);\n}\n\n.walletconnect-modal__close__line2 {\n  position: absolute;\n  width: 100%;\n  border: 1px solid rgb(48, 52, 59);\n  transform: rotate(90deg);\n}\n\n.walletconnect-qrcode__base {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  background: rgba(37, 41, 46, 0.95);\n  height: 100%;\n  left: 0;\n  pointer-events: auto;\n  position: fixed;\n  top: 0;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  width: 100%;\n  will-change: opacity;\n  padding: 40px;\n  box-sizing: border-box;\n}\n\n.walletconnect-qrcode__text {\n  color: rgba(60, 66, 82, 0.6);\n  font-size: 16px;\n  font-weight: 600;\n  letter-spacing: 0;\n  line-height: 1.1875em;\n  margin: 10px 0 20px 0;\n  text-align: center;\n  width: 100%;\n}\n\n@media only screen and (max-width: 768px) {\n  .walletconnect-qrcode__text {\n    font-size: 4vw;\n  }\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-qrcode__text {\n    font-size: 14px;\n  }\n}\n\n.walletconnect-qrcode__image {\n  width: calc(100% - 30px);\n  box-sizing: border-box;\n  cursor: none;\n  margin: 0 auto;\n}\n\n.walletconnect-qrcode__notification {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  font-size: 16px;\n  padding: 16px 20px;\n  border-radius: 16px;\n  text-align: center;\n  transition: all 0.1s ease-in-out;\n  background: white;\n  color: black;\n  margin-bottom: -60px;\n  opacity: 0;\n}\n\n.walletconnect-qrcode__notification.notification__show {\n  opacity: 1;\n}\n\n@media only screen and (max-width: 768px) {\n  .walletconnect-modal__header {\n    height: 130px;\n  }\n  .walletconnect-modal__base {\n    overflow: auto;\n  }\n}\n\n@media only screen and (min-device-width: 415px) and (max-width: 768px) {\n  #content {\n    max-width: 768px;\n    box-sizing: border-box;\n  }\n}\n\n@media only screen and (min-width: 375px) and (max-width: 415px) {\n  #content {\n    max-width: 414px;\n    box-sizing: border-box;\n  }\n}\n\n@media only screen and (min-width: 320px) and (max-width: 375px) {\n  #content {\n    max-width: 375px;\n    box-sizing: border-box;\n  }\n}\n\n@media only screen and (max-width: 320px) {\n  #content {\n    max-width: 320px;\n    box-sizing: border-box;\n  }\n}\n\n.walletconnect-modal__base {\n  -webkit-font-smoothing: antialiased;\n  background: #ffffff;\n  border-radius: 24px;\n  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);\n  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,\n    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,\n    "Open Sans", "Helvetica Neue", sans-serif;\n  margin-top: 41px;\n  padding: 24px 24px 22px;\n  pointer-events: auto;\n  position: relative;\n  text-align: center;\n  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  will-change: transform;\n  overflow: visible;\n  transform: translateY(-50%);\n  top: 50%;\n  max-width: 500px;\n  margin: auto;\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-modal__base {\n    padding: 24px 12px;\n  }\n}\n\n.walletconnect-modal__base .hidden {\n  transform: translateY(150%);\n  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);\n}\n\n.walletconnect-modal__header {\n  align-items: center;\n  display: flex;\n  height: 26px;\n  left: 0;\n  justify-content: space-between;\n  position: absolute;\n  top: -42px;\n  width: 100%;\n}\n\n.walletconnect-modal__base .wc-logo {\n  align-items: center;\n  display: flex;\n  height: 26px;\n  margin-top: 15px;\n  padding-bottom: 15px;\n  pointer-events: auto;\n}\n\n.walletconnect-modal__base .wc-logo div {\n  background-color: #3399ff;\n  height: 21px;\n  margin-right: 5px;\n  mask-image: url("images/wc-logo.svg") center no-repeat;\n  width: 32px;\n}\n\n.walletconnect-modal__base .wc-logo p {\n  color: #ffffff;\n  font-size: 20px;\n  font-weight: 600;\n  margin: 0;\n}\n\n.walletconnect-modal__base h2 {\n  color: rgba(60, 66, 82, 0.6);\n  font-size: 16px;\n  font-weight: 600;\n  letter-spacing: 0;\n  line-height: 1.1875em;\n  margin: 0 0 19px 0;\n  text-align: center;\n  width: 100%;\n}\n\n.walletconnect-modal__base__row {\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n  align-items: center;\n  border-radius: 20px;\n  cursor: pointer;\n  display: flex;\n  height: 56px;\n  justify-content: space-between;\n  padding: 0 15px;\n  position: relative;\n  margin: 0px 0px 8px;\n  text-align: left;\n  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  will-change: transform;\n  text-decoration: none;\n}\n\n.walletconnect-modal__base__row:hover {\n  background: rgba(60, 66, 82, 0.06);\n}\n\n.walletconnect-modal__base__row:active {\n  background: rgba(60, 66, 82, 0.06);\n  transform: scale(0.975);\n  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n}\n\n.walletconnect-modal__base__row__h3 {\n  color: #25292e;\n  font-size: 20px;\n  font-weight: 700;\n  margin: 0;\n  padding-bottom: 3px;\n}\n\n.walletconnect-modal__base__row__right {\n  align-items: center;\n  display: flex;\n  justify-content: center;\n}\n\n.walletconnect-modal__base__row__right__app-icon {\n  border-radius: 8px;\n  height: 34px;\n  margin: 0 11px 2px 0;\n  width: 34px;\n  background-size: 100%;\n  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);\n}\n\n.walletconnect-modal__base__row__right__caret {\n  height: 18px;\n  opacity: 0.3;\n  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  width: 8px;\n  will-change: opacity;\n}\n\n.walletconnect-modal__base__row:hover .caret,\n.walletconnect-modal__base__row:active .caret {\n  opacity: 0.6;\n}\n\n.walletconnect-modal__mobile__toggle {\n  width: 80%;\n  display: flex;\n  margin: 0 auto;\n  position: relative;\n  overflow: hidden;\n  border-radius: 8px;\n  margin-bottom: 18px;\n  background: #d4d5d9;\n}\n\n.walletconnect-modal__single_wallet {\n  display: flex;\n  justify-content: center;\n  margin-top: 7px;\n  margin-bottom: 18px;\n}\n\n.walletconnect-modal__single_wallet a {\n  cursor: pointer;\n  color: rgb(64, 153, 255);\n  font-size: 21px;\n  font-weight: 800;\n  text-decoration: none !important;\n  margin: 0 auto;\n}\n\n.walletconnect-modal__mobile__toggle_selector {\n  width: calc(50% - 8px);\n  background: white;\n  position: absolute;\n  border-radius: 5px;\n  height: calc(100% - 8px);\n  top: 4px;\n  transition: all 0.2s ease-in-out;\n  transform: translate3d(4px, 0, 0);\n}\n\n.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {\n  transform: translate3d(calc(100% + 12px), 0, 0);\n}\n\n.walletconnect-modal__mobile__toggle a {\n  font-size: 12px;\n  width: 50%;\n  text-align: center;\n  padding: 8px;\n  margin: 0;\n  font-weight: 600;\n  z-index: 1;\n}\n\n.walletconnect-modal__footer {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n@media only screen and (max-width: 768px) {\n  .walletconnect-modal__footer {\n    margin-top: 5vw;\n  }\n}\n\n.walletconnect-modal__footer a {\n  cursor: pointer;\n  color: #898d97;\n  font-size: 15px;\n  margin: 0 auto;\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-modal__footer a {\n    font-size: 14px;\n  }\n}\n\n.walletconnect-connect__buttons__wrapper {\n  max-height: 44vh;\n}\n\n.walletconnect-connect__buttons__wrapper__android {\n  margin: 50% 0;\n}\n\n.walletconnect-connect__buttons__wrapper__wrap {\n  display: grid;\n  grid-template-columns: repeat(4, 1fr);\n  margin: 10px 0;\n}\n\n@media only screen and (min-width: 768px) {\n  .walletconnect-connect__buttons__wrapper__wrap {\n    margin-top: 40px;\n  }\n}\n\n.walletconnect-connect__button {\n  background-color: rgb(64, 153, 255);\n  padding: 12px;\n  border-radius: 8px;\n  text-decoration: none;\n  color: rgb(255, 255, 255);\n  font-weight: 500;\n}\n\n.walletconnect-connect__button__icon_anchor {\n  cursor: pointer;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  margin: 8px;\n  width: 42px;\n  justify-self: center;\n  flex-direction: column;\n  text-decoration: none !important;\n}\n\n@media only screen and (max-width: 320px) {\n  .walletconnect-connect__button__icon_anchor {\n    margin: 4px;\n  }\n}\n\n.walletconnect-connect__button__icon {\n  border-radius: 10px;\n  height: 42px;\n  margin: 0;\n  width: 42px;\n  background-size: cover !important;\n  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);\n}\n\n.walletconnect-connect__button__text {\n  color: #424952;\n  font-size: 2.7vw;\n  text-decoration: none !important;\n  padding: 0;\n  margin-top: 1.8vw;\n  font-weight: 600;\n}\n\n@media only screen and (min-width: 768px) {\n  .walletconnect-connect__button__text {\n    font-size: 16px;\n    margin-top: 12px;\n  }\n}\n\n.walletconnect-search__input {\n  border: none;\n  background: #d4d5d9;\n  border-style: none;\n  padding: 8px 16px;\n  outline: none;\n  font-style: normal;\n  font-stretch: normal;\n  font-size: 16px;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: normal;\n  letter-spacing: normal;\n  text-align: left;\n  border-radius: 8px;\n  width: calc(100% - 16px);\n  margin: 0;\n  margin-bottom: 8px;\n}\n',r.head.appendChild(a),(p=(u=s.getDocumentOrThrow()).createElement("div")).setAttribute("id",l),u.body.appendChild(p),c.render(c.createElement(b,{text:E[s.getNavigatorOrThrow().language.split("-")[0]||"en"]||E.en,uri:e,onClose:function(){I(),t&&t()},qrcodeModalOptions:i}),p)}},close:function(){x()||I()}}},2780:function(e,t,i){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var r=i(79626),n=i(38255),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,i){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,i)}function c(e,t,i){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!a.isEncoding(t))throw TypeError("Unknown encoding: "+t);var i=0|g(e,t),r=o(i),n=r.write(e,t);return n!==i&&(r=r.slice(0,n)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(T(e,Uint8Array)){var t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return u(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(T(e,ArrayBuffer)||e&&T(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(T(e,SharedArrayBuffer)||e&&T(e.buffer,SharedArrayBuffer)))return p(e,t,i);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,i);var n=function(e){if(a.isBuffer(e)){var t,i=0|d(e.length),r=o(i);return 0===r.length||e.copy(r,0,0,i),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?o(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return l(e),o(e<0?0:0|d(e))}function u(e){for(var t=e.length<0?0:0|d(e.length),i=o(t),r=0;r<t;r+=1)i[r]=255&e[r];return i}function p(e,t,i){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),a.prototype),r}function d(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function g(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||T(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return P(e).length;default:if(n)return r?-1:R(e).length;t=(""+t).toLowerCase(),n=!0}}function f(e,t,i){var n,s,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var n="",s=t;s<i;++s)n+=N[e[s]];return n}(this,t,i);case"utf8":case"utf-8":return _(this,t,i);case"ascii":return function(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}(this,t,i);case"latin1":case"binary":return function(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}(this,t,i);case"base64":return n=t,s=i,0===n&&s===this.length?r.fromByteArray(this):r.fromByteArray(this.slice(n,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,i){for(var r=e.slice(t,i),n="",s=0;s<r.length-1;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}(this,t,i);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function y(e,t,i,r,n){var s;if(0===e.length)return -1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),(s=i=+i)!=s&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return -1;i=e.length-1}else if(i<0){if(!n)return -1;i=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:w(e,t,i,r,n);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):w(e,[t],i,r,n);throw TypeError("val must be string, number or Buffer")}function w(e,t,i,r,n){var s,o=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;o=2,a/=2,c/=2,i/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var h=-1;for(s=i;s<a;s++)if(l(e,s)===l(t,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===c)return h*o}else -1!==h&&(s-=s-h),h=-1}else for(i+c>a&&(i=a-c),s=i;s>=0;s--){for(var u=!0,p=0;p<c;p++)if(l(e,s+p)!==l(t,p)){u=!1;break}if(u)return s}return -1}function _(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;n<i;){var s,o,a,c,l=e[n],h=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u<=i)switch(u){case 1:l<128&&(h=l);break;case 2:(192&(s=e[n+1]))==128&&(c=(31&l)<<6|63&s)>127&&(h=c);break;case 3:s=e[n+1],o=e[n+2],(192&s)==128&&(192&o)==128&&(c=(15&l)<<12|(63&s)<<6|63&o)>2047&&(c<55296||c>57343)&&(h=c);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(c=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&c<1114112&&(h=c)}null===h?(h=65533,u=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),n+=u}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var i="",r=0;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return i}(r)}function v(e,t,i){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>i)throw RangeError("Trying to access beyond buffer length")}function b(e,t,i,r,n,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(i+r>e.length)throw RangeError("Index out of range")}function E(e,t,i,r,n,s){if(i+r>e.length||i<0)throw RangeError("Index out of range")}function I(e,t,i,r,s){return t=+t,i>>>=0,s||E(e,t,i,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,i,r,23,4),i+4}function x(e,t,i,r,s){return t=+t,i>>>=0,s||E(e,t,i,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,i,r,52,8),i+8}t.lW=a,t.h2=50,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,i){return c(e,t,i)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,i){return(l(e),e<=0)?o(e):void 0!==t?"string"==typeof i?o(e).fill(t,i):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return h(e)},a.allocUnsafeSlow=function(e){return h(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(T(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),T(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,r=t.length,n=0,s=Math.min(i,r);n<s;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(i=0,t=0;i<e.length;++i)t+=e[i].length;var i,r=a.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var s=e[i];if(T(s,Uint8Array))n+s.length>r.length?a.from(s).copy(r,n):Uint8Array.prototype.set.call(r,s,n);else if(a.isBuffer(s))s.copy(r,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=s.length}return r},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?_(this,0,e):f.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",i=t.h2;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,i,r,n){if(T(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return -1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;for(var s=n-r,o=i-t,c=Math.min(s,o),l=this.slice(r,n),h=e.slice(t,i),u=0;u<c;++u)if(l[u]!==h[u]){s=l[u],o=h[u];break}return s<o?-1:o<s?1:0},a.prototype.includes=function(e,t,i){return -1!==this.indexOf(e,t,i)},a.prototype.indexOf=function(e,t,i){return y(this,e,t,i,!0)},a.prototype.lastIndexOf=function(e,t,i){return y(this,e,t,i,!1)},a.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,o,a,c,l,h,u,p=this.length-t;if((void 0===i||i>p)&&(i=p),e.length>0&&(i<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var d=!1;;)switch(r){case"hex":return function(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r))>n&&(r=n):r=n;var s=t.length;r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a=parseInt(t.substr(2*o,2),16);if(a!=a)break;e[i+o]=a}return o}(this,e,t,i);case"utf8":case"utf-8":return n=t,s=i,C(R(e,this.length-n),this,n,s);case"ascii":case"latin1":case"binary":return o=t,a=i,C(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(e),this,o,a);case"base64":return c=t,l=i,C(P(e),this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=t,u=i,C(function(e,t){for(var i,r,n=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(i=e.charCodeAt(s))>>8,n.push(i%256),n.push(r);return n}(e,this.length-h),this,h,u);default:if(d)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),d=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||v(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||v(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||v(e,t,this.length);for(var r=t,n=1,s=this[e+--r];r>0&&(n*=256);)s+=this[e+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||v(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||v(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt16BE=function(e,t){e>>>=0,t||v(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||v(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||v(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||v(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||v(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||v(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,i,r){if(e=+e,t>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,e,t,i,n,0)}var s=1,o=0;for(this[t]=255&e;++o<i&&(s*=256);)this[t+o]=e/s&255;return t+i},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,i,r){if(e=+e,t>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,e,t,i,n,0)}var s=i-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+i},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,e,t,i,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<i&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+i},a.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,e,t,i,n-1,-n)}var s=i-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o>>0)-a&255;return t+i},a.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||b(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,i){return I(this,e,t,!0,i)},a.prototype.writeFloatBE=function(e,t,i){return I(this,e,t,!1,i)},a.prototype.writeDoubleLE=function(e,t,i){return x(this,e,t,!0,i)},a.prototype.writeDoubleBE=function(e,t,i){return x(this,e,t,!1,i)},a.prototype.copy=function(e,t,i,r){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n=r-i;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,i,r):Uint8Array.prototype.set.call(e,this.subarray(i,r),t),n},a.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var n,s=e.charCodeAt(0);("utf8"===r&&s<128||"latin1"===r)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(n=t;n<i;++n)this[n]=e;else{var o=a.isBuffer(e)?e:a.from(e,r),c=o.length;if(0===c)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<i-t;++n)this[n+t]=o[n%c]}return this};var S=/[^+/0-9A-Za-z-_]/g;function R(e,t){t=t||1/0;for(var i,r=e.length,n=null,s=[],o=0;o<r;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319||o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function P(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(S,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function C(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length)&&!(n>=e.length);++n)t[n+i]=e[n];return n}function T(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var N=function(){for(var e="0123456789abcdef",t=Array(256),i=0;i<16;++i)for(var r=16*i,n=0;n<16;++n)t[r+n]=e[i]+e[n];return t}()},44787:function(e,t,i){"use strict";i.r(t),i.d(t,{Children:function(){return ef},Component:function(){return _},Fragment:function(){return w},PureComponent:function(){return eh},Suspense:function(){return ey},SuspenseList:function(){return ev},cloneElement:function(){return eM},createContext:function(){return D},createElement:function(){return f},createFactory:function(){return eq},createPortal:function(){return ex},createRef:function(){return y},default:function(){return ez},findDOMNode:function(){return eL},forwardRef:function(){return ed},hydrate:function(){return eC},isValidElement:function(){return eD},lazy:function(){return e_},memo:function(){return eu},render:function(){return eP},unmountComponentAtNode:function(){return eU},unstable_batchedUpdates:function(){return eB},useCallback:function(){return X},useContext:function(){return ee},useDebugValue:function(){return et},useEffect:function(){return W},useErrorBoundary:function(){return ei},useImperativeHandle:function(){return G},useLayoutEffect:function(){return Y},useMemo:function(){return Z},useReducer:function(){return J},useRef:function(){return Q},useState:function(){return H},version:function(){return eO}});var r,n,s,o,a,c,l,h={},u=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function d(e,t){for(var i in t)e[i]=t[i];return e}function g(e){var t=e.parentNode;t&&t.removeChild(e)}function f(e,t,i){var r,n=arguments,s={};for(r in t)"key"!==r&&"ref"!==r&&(s[r]=t[r]);if(arguments.length>3)for(i=[i],r=3;r<arguments.length;r++)i.push(n[r]);if(null!=i&&(s.children=i),"function"==typeof e&&null!=e.defaultProps)for(r in e.defaultProps)void 0===s[r]&&(s[r]=e.defaultProps[r]);return m(e,s,t&&t.key,t&&t.ref,null)}function m(e,t,i,n,s){var o={type:e,props:t,key:i,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s};return null==s&&(o.__v=o),r.vnode&&r.vnode(o),o}function y(){return{}}function w(e){return e.children}function _(e,t){this.props=e,this.context=t}function v(e,t){if(null==t)return e.__?v(e.__,e.__.__k.indexOf(e)+1):null;for(var i;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e)return i.__e;return"function"==typeof e.type?v(e):null}function b(e){(!e.__d&&(e.__d=!0)&&n.push(e)&&!s++||a!==r.debounceRendering)&&((a=r.debounceRendering)||o)(E)}function E(){for(var e;s=n.length;)e=n.sort(function(e,t){return e.__v.__b-t.__v.__b}),n=[],e.some(function(e){var t,i,r,n,s,o;e.__d&&(s=(n=e.__v).__e,(o=e.__P)&&(t=[],(i=d({},n)).__v=i,r=C(o,n,i,e.__n,void 0!==o.ownerSVGElement,null,t,null==s?v(n):s),T(t,n),r!=s&&function e(t){var i,r;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,i=0;i<t.__k.length;i++)if(null!=(r=t.__k[i])&&null!=r.__e){t.__e=t.__c.base=r.__e;break}return e(t)}}(n)))})}function I(e,t,i,r,n,s,o,a,c){var l,p,d,f,m,y,w,_=i&&i.__k||u,b=_.length;if(a==h&&(a=null!=s?s[0]:b?v(i,0):null),l=0,t.__k=x(t.__k,function(i){if(null!=i){if(i.__=t,i.__b=t.__b+1,null===(d=_[l])||d&&i.key==d.key&&i.type===d.type)_[l]=void 0;else for(p=0;p<b;p++){if((d=_[p])&&i.key==d.key&&i.type===d.type){_[p]=void 0;break}d=null}if(f=C(e,i,d=d||h,r,n,s,o,a,c),(p=i.ref)&&d.ref!=p&&(w||(w=[]),d.ref&&w.push(d.ref,null,i),w.push(p,i.__c||f,i)),null!=f){var u;if(null==y&&(y=f),void 0!==i.__d)u=i.__d,i.__d=void 0;else if(s==d||f!=a||null==f.parentNode){e:if(null==a||a.parentNode!==e)e.appendChild(f),u=null;else{for(m=a,p=0;(m=m.nextSibling)&&p<b;p+=2)if(m==f)break e;e.insertBefore(f,a),u=a}"option"==t.type&&(e.value="")}a=void 0!==u?u:f.nextSibling,"function"==typeof t.type&&(t.__d=a)}else a&&d.__e==a&&a.parentNode!=e&&(a=v(d))}return l++,i}),t.__e=y,null!=s&&"function"!=typeof t.type)for(l=s.length;l--;)null!=s[l]&&g(s[l]);for(l=b;l--;)null!=_[l]&&k(_[l],_[l]);if(w)for(l=0;l<w.length;l++)N(w[l],w[++l],w[++l])}function x(e,t,i){if(null==i&&(i=[]),null==e||"boolean"==typeof e)t&&i.push(t(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)x(e[r],t,i);else i.push(t?t("string"==typeof e||"number"==typeof e?m(null,e,null,null,e):null!=e.__e||null!=e.__c?m(e.type,e.props,e.key,null,e.__v):e):e);return i}function S(e,t,i){"-"===t[0]?e.setProperty(t,i):e[t]="number"==typeof i&&!1===p.test(t)?i+"px":null==i?"":i}function R(e,t,i,r,n){var s,o,a,c,l;if(n?"className"===t&&(t="class"):"class"===t&&(t="className"),"style"===t){if(s=e.style,"string"==typeof i)s.cssText=i;else{if("string"==typeof r&&(s.cssText="",r=null),r)for(c in r)i&&c in i||S(s,c,"");if(i)for(l in i)r&&i[l]===r[l]||S(s,l,i[l])}}else"o"===t[0]&&"n"===t[1]?(o=t!==(t=t.replace(/Capture$/,"")),t=((a=t.toLowerCase())in e?a:t).slice(2),i?(r||e.addEventListener(t,P,o),(e.l||(e.l={}))[t]=i):e.removeEventListener(t,P,o)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&!n&&t in e?e[t]=null==i?"":i:"function"!=typeof i&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==i||!1===i?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),i):null!=i&&(!1!==i||/^ar/.test(t))?e.setAttribute(t,i):e.removeAttribute(t))}function P(e){this.l[e.type](r.event?r.event(e):e)}function C(e,t,i,n,s,o,a,c,l){var p,g,f,m,y,v,b,E,x,S,P=t.type;if(void 0!==t.constructor)return null;(p=r.__b)&&p(t);try{e:if("function"==typeof P){if(E=t.props,x=(p=P.contextType)&&n[p.__c],S=p?x?x.props.value:p.__:n,i.__c?b=(g=t.__c=i.__c).__=g.__E:("prototype"in P&&P.prototype.render?t.__c=g=new P(E,S):(t.__c=g=new _(E,S),g.constructor=P,g.render=A),x&&x.sub(g),g.props=E,g.state||(g.state={}),g.context=S,g.__n=n,f=g.__d=!0,g.__h=[]),null==g.__s&&(g.__s=g.state),null!=P.getDerivedStateFromProps&&(g.__s==g.state&&(g.__s=d({},g.__s)),d(g.__s,P.getDerivedStateFromProps(E,g.__s))),m=g.props,y=g.state,f)null==P.getDerivedStateFromProps&&null!=g.componentWillMount&&g.componentWillMount(),null!=g.componentDidMount&&g.__h.push(g.componentDidMount);else{if(null==P.getDerivedStateFromProps&&E!==m&&null!=g.componentWillReceiveProps&&g.componentWillReceiveProps(E,S),!g.__e&&null!=g.shouldComponentUpdate&&!1===g.shouldComponentUpdate(E,g.__s,S)||t.__v===i.__v&&!g.__){for(g.props=E,g.state=g.__s,t.__v!==i.__v&&(g.__d=!1),g.__v=t,t.__e=i.__e,t.__k=i.__k,g.__h.length&&a.push(g),p=0;p<t.__k.length;p++)t.__k[p]&&(t.__k[p].__=t);break e}null!=g.componentWillUpdate&&g.componentWillUpdate(E,g.__s,S),null!=g.componentDidUpdate&&g.__h.push(function(){g.componentDidUpdate(m,y,v)})}g.context=S,g.props=E,g.state=g.__s,(p=r.__r)&&p(t),g.__d=!1,g.__v=t,g.__P=e,p=g.render(g.props,g.state,g.context),t.__k=null!=p&&p.type==w&&null==p.key?p.props.children:Array.isArray(p)?p:[p],null!=g.getChildContext&&(n=d(d({},n),g.getChildContext())),f||null==g.getSnapshotBeforeUpdate||(v=g.getSnapshotBeforeUpdate(m,y)),I(e,t,i,n,s,o,a,c,l),g.base=t.__e,g.__h.length&&a.push(g),b&&(g.__E=g.__=null),g.__e=!1}else null==o&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=function(e,t,i,r,n,s,o,a){var c,l,p,d,g,f=i.props,m=t.props;if(n="svg"===t.type||n,null!=s){for(c=0;c<s.length;c++)if(null!=(l=s[c])&&((null===t.type?3===l.nodeType:l.localName===t.type)||e==l)){e=l,s[c]=null;break}}if(null==e){if(null===t.type)return document.createTextNode(m);e=n?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,m.is&&{is:m.is}),s=null,a=!1}if(null===t.type)f!==m&&e.data!=m&&(e.data=m);else{if(null!=s&&(s=u.slice.call(e.childNodes)),p=(f=i.props||h).dangerouslySetInnerHTML,d=m.dangerouslySetInnerHTML,!a){if(f===h)for(f={},g=0;g<e.attributes.length;g++)f[e.attributes[g].name]=e.attributes[g].value;(d||p)&&(d&&p&&d.__html==p.__html||(e.innerHTML=d&&d.__html||""))}(function(e,t,i,r,n){var s;for(s in i)"children"===s||"key"===s||s in t||R(e,s,null,i[s],r);for(s in t)n&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||i[s]===t[s]||R(e,s,t[s],i[s],r)})(e,m,f,n,a),d?t.__k=[]:(t.__k=t.props.children,I(e,t,i,r,"foreignObject"!==t.type&&n,s,o,h,a)),a||("value"in m&&void 0!==(c=m.value)&&c!==e.value&&R(e,"value",c,f.value,!1),"checked"in m&&void 0!==(c=m.checked)&&c!==e.checked&&R(e,"checked",c,f.checked,!1))}return e}(i.__e,t,i,n,s,o,a,l);(p=r.diffed)&&p(t)}catch(e){t.__v=null,r.__e(e,t,i)}return t.__e}function T(e,t){r.__c&&r.__c(t,e),e.some(function(t){try{e=t.__h,t.__h=[],e.some(function(e){e.call(t)})}catch(e){r.__e(e,t.__v)}})}function N(e,t,i){try{"function"==typeof e?e(t):e.current=t}catch(e){r.__e(e,i)}}function k(e,t,i){var n,s,o;if(r.unmount&&r.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||N(n,null,t)),i||"function"==typeof e.type||(i=null!=(s=e.__e)),e.__e=e.__d=void 0,null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){r.__e(e,t)}n.base=n.__P=null}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&k(n[o],t,i);null!=s&&g(s)}function A(e,t,i){return this.constructor(e,i)}function O(e,t,i){var n,s,o;r.__&&r.__(e,t),s=(n=i===c)?null:i&&i.__k||t.__k,e=f(w,null,[e]),o=[],C(t,(n?t:i||t).__k=e,s||h,h,void 0!==t.ownerSVGElement,i&&!n?[i]:s?null:u.slice.call(t.childNodes),o,i||h,n),T(o,e)}function q(e,t){var i,r;for(r in t=d(d({},e.props),t),arguments.length>2&&(t.children=u.slice.call(arguments,2)),i={},t)"key"!==r&&"ref"!==r&&(i[r]=t[r]);return m(e.type,i,t.key||e.key,t.ref||e.ref,null)}function D(e){var t={},i={__c:"__cC"+l++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var r,n=this;return this.getChildContext||(r=[],this.getChildContext=function(){return t[i.__c]=n,t},this.shouldComponentUpdate=function(e){n.props.value!==e.value&&r.some(function(t){t.context=e.value,b(t)})},this.sub=function(e){r.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){r.splice(r.indexOf(e),1),t&&t.call(e)}}),e.children}};return i.Consumer.contextType=i,i.Provider.__=i,i}r={__e:function(e,t){for(var i,r;t=t.__;)if((i=t.__c)&&!i.__)try{if(i.constructor&&null!=i.constructor.getDerivedStateFromError&&(r=!0,i.setState(i.constructor.getDerivedStateFromError(e))),null!=i.componentDidCatch&&(r=!0,i.componentDidCatch(e)),r)return b(i.__E=i)}catch(t){e=t}throw e}},_.prototype.setState=function(e,t){var i;i=this.__s!==this.state?this.__s:this.__s=d({},this.state),"function"==typeof e&&(e=e(i,this.props)),e&&d(i,e),null!=e&&this.__v&&(t&&this.__h.push(t),b(this))},_.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),b(this))},_.prototype.render=w,n=[],s=0,o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,c=h,l=0;var M,U,L,B=0,z=[],$=r.__r,j=r.diffed,V=r.__c,F=r.unmount;function K(e,t){r.__h&&r.__h(U,e,B||t),B=0;var i=U.__H||(U.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({}),i.__[e]}function H(e){return B=1,J(ea,e)}function J(e,t,i){var r=K(M++,2);return r.__c||(r.__c=U,r.__=[i?i(t):ea(void 0,t),function(t){var i=e(r.__[0],t);r.__[0]!==i&&(r.__[0]=i,r.__c.setState({}))}]),r.__}function W(e,t){var i=K(M++,3);!r.__s&&eo(i.__H,t)&&(i.__=e,i.__H=t,U.__H.__h.push(i))}function Y(e,t){var i=K(M++,4);!r.__s&&eo(i.__H,t)&&(i.__=e,i.__H=t,U.__h.push(i))}function Q(e){return B=5,Z(function(){return{current:e}},[])}function G(e,t,i){B=6,Y(function(){"function"==typeof e?e(t()):e&&(e.current=t())},null==i?i:i.concat(e))}function Z(e,t){var i=K(M++,7);return eo(i.__H,t)?(i.__H=t,i.__h=e,i.__=e()):i.__}function X(e,t){return B=8,Z(function(){return e},t)}function ee(e){var t=U.context[e.__c],i=K(M++,9);return i.__c=e,t?(null==i.__&&(i.__=!0,t.sub(U)),t.props.value):e.__}function et(e,t){r.useDebugValue&&r.useDebugValue(t?t(e):e)}function ei(e){var t=K(M++,10),i=H();return t.__=e,U.componentDidCatch||(U.componentDidCatch=function(e){t.__&&t.__(e),i[1](e)}),[i[0],function(){i[1](void 0)}]}function er(){z.some(function(e){if(e.__P)try{e.__H.__h.forEach(en),e.__H.__h.forEach(es),e.__H.__h=[]}catch(t){return e.__H.__h=[],r.__e(t,e.__v),!0}}),z=[]}function en(e){e.t&&e.t()}function es(e){var t=e.__();"function"==typeof t&&(e.t=t)}function eo(e,t){return!e||t.some(function(t,i){return t!==e[i]})}function ea(e,t){return"function"==typeof t?t(e):t}function ec(e,t){for(var i in t)e[i]=t[i];return e}function el(e,t){for(var i in e)if("__source"!==i&&!(i in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}r.__r=function(e){$&&$(e),M=0,(U=e.__c).__H&&(U.__H.__h.forEach(en),U.__H.__h.forEach(es),U.__H.__h=[])},r.diffed=function(e){j&&j(e);var t=e.__c;if(t){var i=t.__H;i&&i.__h.length&&(1!==z.push(t)&&L===r.requestAnimationFrame||((L=r.requestAnimationFrame)||function(e){var t,i=function(){clearTimeout(r),cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(i,100);"undefined"!=typeof window&&(t=requestAnimationFrame(i))})(er))}},r.__c=function(e,t){t.some(function(e){try{e.__h.forEach(en),e.__h=e.__h.filter(function(e){return!e.__||es(e)})}catch(i){t.some(function(e){e.__h&&(e.__h=[])}),t=[],r.__e(i,e.__v)}}),V&&V(e,t)},r.unmount=function(e){F&&F(e);var t=e.__c;if(t){var i=t.__H;if(i)try{i.__.forEach(function(e){return e.t&&e.t()})}catch(e){r.__e(e,t.__v)}}};var eh=function(e){function t(t){var i;return(i=e.call(this,t)||this).isPureReactComponent=!0,i}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e,t.prototype.shouldComponentUpdate=function(e,t){return el(this.props,e)||el(this.state,t)},t}(_);function eu(e,t){function i(e){var i=this.props.ref,r=i==e.ref;return!r&&i&&(i.call?i(null):i.current=null),t?!t(this.props,e)||!r:el(this.props,e)}function r(t){return this.shouldComponentUpdate=i,f(e,ec({},t))}return r.prototype.isReactComponent=!0,r.displayName="Memo("+(e.displayName||e.name)+")",r.t=!0,r}var ep=r.__b;function ed(e){function t(t){var i=ec({},t);return delete i.ref,e(i,t.ref)}return t.prototype.isReactComponent=t.t=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}r.__b=function(e){e.type&&e.type.t&&e.ref&&(e.props.ref=e.ref,e.ref=null),ep&&ep(e)};var eg=function(e,t){return e?x(e).reduce(function(e,i,r){return e.concat(t(i,r))},[]):null},ef={map:eg,forEach:eg,count:function(e){return e?x(e).length:0},only:function(e){if(1!==(e=x(e)).length)throw Error("Children.only() expects only one child.");return e[0]},toArray:x},em=r.__e;function ey(){this.__u=0,this.o=null,this.__b=null}function ew(e){var t=e.__.__c;return t&&t.u&&t.u(e)}function e_(e){var t,i,r;function n(n){if(t||(t=e()).then(function(e){i=e.default||e},function(e){r=e}),r)throw r;if(!i)throw t;return f(i,n)}return n.displayName="Lazy",n.t=!0,n}function ev(){this.i=null,this.l=null}r.__e=function(e,t,i){if(e.then){for(var r,n=t;n=n.__;)if((r=n.__c)&&r.__c)return r.__c(e,t.__c)}em(e,t,i)},(ey.prototype=new _).__c=function(e,t){var i=this;null==i.o&&(i.o=[]),i.o.push(t);var r=ew(i.__v),n=!1,s=function(){n||(n=!0,r?r(o):o())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){s(),t.__c&&t.__c()};var o=function(){var e;if(!--i.__u)for(i.__v.__k[0]=i.state.u,i.setState({u:i.__b=null});e=i.o.pop();)e.forceUpdate()};i.__u++||i.setState({u:i.__b=i.__v.__k[0]}),e.then(s,s)},ey.prototype.render=function(e,t){return this.__b&&(this.__v.__k[0]=function e(t){return t&&((t=ec({},t)).__c=null,t.__k=t.__k&&t.__k.map(e)),t}(this.__b),this.__b=null),[f(_,null,t.u?null:e.children),t.u&&e.fallback]};var eb=function(e,t,i){if(++i[1]===i[0]&&e.l.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.l.size))for(i=e.i;i;){for(;i.length>3;)i.pop()();if(i[1]<i[0])break;e.i=i=i[2]}};(ev.prototype=new _).u=function(e){var t=this,i=ew(t.__v),r=t.l.get(e);return r[0]++,function(n){var s=function(){t.props.revealOrder?(r.push(n),eb(t,e,r)):n()};i?i(s):s()}},ev.prototype.render=function(e){this.i=null,this.l=new Map;var t=x(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var i=t.length;i--;)this.l.set(t[i],this.i=[1,0,this.i]);return e.children},ev.prototype.componentDidUpdate=ev.prototype.componentDidMount=function(){var e=this;e.l.forEach(function(t,i){eb(e,i,t)})};var eE=function(){function e(){}var t=e.prototype;return t.getChildContext=function(){return this.props.context},t.render=function(e){return e.children},e}();function eI(e){var t=this,i=e.container,r=f(eE,{context:t.context},e.vnode);return t.s&&t.s!==i&&(t.v.parentNode&&t.s.removeChild(t.v),k(t.h),t.p=!1),e.vnode?t.p?(i.__k=t.__k,O(r,i),t.__k=i.__k):(t.v=document.createTextNode(""),O("",i,c),i.appendChild(t.v),t.p=!0,t.s=i,O(r,i,t.v),t.__k=t.v.__k):t.p&&(t.v.parentNode&&t.s.removeChild(t.v),k(t.h)),t.h=r,t.componentWillUnmount=function(){t.v.parentNode&&t.s.removeChild(t.v),k(t.h)},null}function ex(e,t){return f(eI,{vnode:e,container:t})}var eS=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;_.prototype.isReactComponent={};var eR="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;function eP(e,t,i){if(null==t.__k)for(;t.firstChild;)t.removeChild(t.firstChild);return O(e,t),"function"==typeof i&&i(),e?e.__c:null}function eC(e,t,i){return O(e,t,c),"function"==typeof i&&i(),e?e.__c:null}var eT=r.event;function eN(e,t){e["UNSAFE_"+t]&&!e[t]&&Object.defineProperty(e,t,{configurable:!1,get:function(){return this["UNSAFE_"+t]},set:function(e){this["UNSAFE_"+t]=e}})}r.event=function(e){eT&&(e=eT(e)),e.persist=function(){};var t=!1,i=!1,r=e.stopPropagation;e.stopPropagation=function(){r.call(e),t=!0};var n=e.preventDefault;return e.preventDefault=function(){n.call(e),i=!0},e.isPropagationStopped=function(){return t},e.isDefaultPrevented=function(){return i},e.nativeEvent=e};var ek={configurable:!0,get:function(){return this.class}},eA=r.vnode;r.vnode=function(e){e.$$typeof=eR;var t,i,r,n=e.type,s=e.props;if(n){if(s.class!=s.className&&(ek.enumerable="className"in s,null!=s.className&&(s.class=s.className),Object.defineProperty(s,"className",ek)),"function"!=typeof n){for(r in s.defaultValue&&void 0!==s.value&&(s.value||0===s.value||(s.value=s.defaultValue),delete s.defaultValue),Array.isArray(s.value)&&s.multiple&&"select"===n&&(x(s.children).forEach(function(e){-1!=s.value.indexOf(e.props.value)&&(e.props.selected=!0)}),delete s.value),s)if(t=eS.test(r))break;if(t)for(r in i=e.props={},s)i[eS.test(r)?r.replace(/[A-Z0-9]/,"-$&").toLowerCase():r]=s[r]}!function(){var t=e.type,i=e.props;if(i&&"string"==typeof t){var r={};for(var n in i)/^on(Ani|Tra|Tou)/.test(n)&&(i[n.toLowerCase()]=i[n],delete i[n]),r[n.toLowerCase()]=n;if(r.ondoubleclick&&(i.ondblclick=i[r.ondoubleclick],delete i[r.ondoubleclick]),r.onbeforeinput&&(i.onbeforeinput=i[r.onbeforeinput],delete i[r.onbeforeinput]),r.onchange&&("textarea"===t||"input"===t.toLowerCase()&&!/^fil|che|ra/i.test(i.type))){var s=r.oninput||"oninput";i[s]||(i[s]=i[r.onchange],delete i[r.onchange])}}}(),"function"==typeof n&&!n.m&&n.prototype&&(eN(n.prototype,"componentWillMount"),eN(n.prototype,"componentWillReceiveProps"),eN(n.prototype,"componentWillUpdate"),n.m=!0)}eA&&eA(e)};var eO="16.8.0";function eq(e){return f.bind(null,e)}function eD(e){return!!e&&e.$$typeof===eR}function eM(e){return eD(e)?q.apply(null,arguments):e}function eU(e){return!!e.__k&&(O(null,e),!0)}function eL(e){return e&&(e.base||1===e.nodeType&&e)||null}var eB=function(e,t){return e(t)},ez={useState:H,useReducer:J,useEffect:W,useLayoutEffect:Y,useRef:Q,useImperativeHandle:G,useMemo:Z,useCallback:X,useContext:ee,useDebugValue:et,version:"16.8.0",Children:ef,render:eP,hydrate:eP,unmountComponentAtNode:eU,createPortal:ex,createElement:f,createContext:D,createFactory:eq,cloneElement:eM,createRef:y,Fragment:w,isValidElement:eD,findDOMNode:eL,Component:_,PureComponent:eh,memo:eu,forwardRef:ed,unstable_batchedUpdates:eB,Suspense:ey,SuspenseList:ev,lazy:e_}},98972:function(e,t,i){var r=i(13976),n=i(31352),s=i(94898),o=i(38852);function a(e,t,i,s,o){var a=[].slice.call(arguments,1),c=a.length,l="function"==typeof a[c-1];if(!l&&!r())throw Error("Callback required as last argument");if(l){if(c<2)throw Error("Too few arguments provided");2===c?(o=i,i=t,t=s=void 0):3===c&&(t.getContext&&void 0===o?(o=s,s=void 0):(o=s,s=i,i=t,t=void 0))}else{if(c<1)throw Error("Too few arguments provided");return 1===c?(i=t,t=s=void 0):2!==c||t.getContext||(s=i,i=t,t=void 0),new Promise(function(r,o){try{var a=n.create(i,s);r(e(a,t,s))}catch(e){o(e)}})}try{var h=n.create(i,s);o(null,e(h,t,s))}catch(e){o(e)}}t.create=n.create,t.toCanvas=a.bind(null,s.render),t.toDataURL=a.bind(null,s.renderToDataURL),t.toString=a.bind(null,function(e,t,i){return o.render(e,i)})},13976:function(e){e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},78285:function(e,t,i){var r=i(66715).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];for(var t=Math.floor(e/7)+2,i=r(e),n=145===i?26:2*Math.ceil((i-13)/(2*t-2)),s=[i-7],o=1;o<t-1;o++)s[o]=s[o-1]-n;return s.push(6),s.reverse()},t.getPositions=function(e){for(var i=[],r=t.getRowColCoords(e),n=r.length,s=0;s<n;s++)for(var o=0;o<n;o++)(0!==s||0!==o)&&(0!==s||o!==n-1)&&(s!==n-1||0!==o)&&i.push([r[s],r[o]]);return i}},30049:function(e,t,i){var r=i(9022),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(e){this.mode=r.ALPHANUMERIC,this.data=e}s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){var t;for(t=0;t+2<=this.data.length;t+=2){var i=45*n.indexOf(this.data[t]);i+=n.indexOf(this.data[t+1]),e.put(i,11)}this.data.length%2&&e.put(n.indexOf(this.data[t]),6)},e.exports=s},57301:function(e){function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){return(this.buffer[Math.floor(e/8)]>>>7-e%8&1)==1},put:function(e,t){for(var i=0;i<t;i++)this.putBit((e>>>t-i-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},14164:function(e,t,i){var r=i(25811);function n(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=r.alloc(e*e),this.reservedBit=r.alloc(e*e)}n.prototype.set=function(e,t,i,r){var n=e*this.size+t;this.data[n]=i,r&&(this.reservedBit[n]=!0)},n.prototype.get=function(e,t){return this.data[e*this.size+t]},n.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},n.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=n},90904:function(e,t,i){var r=i(25811),n=i(9022);function s(e){this.mode=n.BYTE,this.data=r.from(e)}s.getBitsLength=function(e){return 8*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){for(var t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)},e.exports=s},23637:function(e,t,i){var r=i(40244),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case r.L:return n[(e-1)*4+0];case r.M:return n[(e-1)*4+1];case r.Q:return n[(e-1)*4+2];case r.H:return n[(e-1)*4+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return s[(e-1)*4+0];case r.M:return s[(e-1)*4+1];case r.Q:return s[(e-1)*4+2];case r.H:return s[(e-1)*4+3];default:return}}},40244:function(e,t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw Error("Unknown EC Level: "+e)}}(e)}catch(e){return i}}},15503:function(e,t,i){var r=i(66715).getSymbolSize;t.getPositions=function(e){var t=r(e);return[[0,0],[t-7,0],[0,t-7]]}},51722:function(e,t,i){var r=i(66715),n=r.getBCHDigit(1335);t.getEncodedBits=function(e,t){for(var i=e.bit<<3|t,s=i<<10;r.getBCHDigit(s)-n>=0;)s^=1335<<r.getBCHDigit(s)-n;return(i<<10|s)^21522}},26708:function(e,t,i){var r=i(25811),n=r.alloc(512),s=r.alloc(256);!function(){for(var e=1,t=0;t<255;t++)n[t]=e,s[e]=t,256&(e<<=1)&&(e^=285);for(t=255;t<512;t++)n[t]=n[t-255]}(),t.log=function(e){if(e<1)throw Error("log("+e+")");return s[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[s[e]+s[t]]}},33415:function(e,t,i){var r=i(9022),n=i(66715);function s(e){this.mode=r.KANJI,this.data=e}s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){var t;for(t=0;t<this.data.length;t++){var i=n.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");i=(i>>>8&255)*192+(255&i),e.put(i,13)}},e.exports=s},25435:function(e,t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var i={N1:3,N2:3,N3:40,N4:10};t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){for(var t=e.size,r=0,n=0,s=0,o=null,a=null,c=0;c<t;c++){n=s=0,o=a=null;for(var l=0;l<t;l++){var h=e.get(c,l);h===o?n++:(n>=5&&(r+=i.N1+(n-5)),o=h,n=1),(h=e.get(l,c))===a?s++:(s>=5&&(r+=i.N1+(s-5)),a=h,s=1)}n>=5&&(r+=i.N1+(n-5)),s>=5&&(r+=i.N1+(s-5))}return r},t.getPenaltyN2=function(e){for(var t=e.size,r=0,n=0;n<t-1;n++)for(var s=0;s<t-1;s++){var o=e.get(n,s)+e.get(n,s+1)+e.get(n+1,s)+e.get(n+1,s+1);(4===o||0===o)&&r++}return r*i.N2},t.getPenaltyN3=function(e){for(var t=e.size,r=0,n=0,s=0,o=0;o<t;o++){n=s=0;for(var a=0;a<t;a++)n=n<<1&2047|e.get(o,a),a>=10&&(1488===n||93===n)&&r++,s=s<<1&2047|e.get(a,o),a>=10&&(1488===s||93===s)&&r++}return r*i.N3},t.getPenaltyN4=function(e){for(var t=0,r=e.data.length,n=0;n<r;n++)t+=e.data[n];return Math.abs(Math.ceil(100*t/r/5)-10)*i.N4},t.applyMask=function(e,i){for(var r=i.size,n=0;n<r;n++)for(var s=0;s<r;s++)i.isReserved(s,n)||i.xor(s,n,function(e,i,r){switch(e){case t.Patterns.PATTERN000:return(i+r)%2==0;case t.Patterns.PATTERN001:return i%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(i+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return i*r%2+i*r%3==0;case t.Patterns.PATTERN110:return(i*r%2+i*r%3)%2==0;case t.Patterns.PATTERN111:return(i*r%3+(i+r)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,s,n))},t.getBestMask=function(e,i){for(var r=Object.keys(t.Patterns).length,n=0,s=1/0,o=0;o<r;o++){i(o),t.applyMask(o,e);var a=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),a<s&&(s=a,n=o)}return n}},9022:function(e,t,i){var r=i(45514),n=i(68649);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!r.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw Error("Unknown mode: "+e)}}(e)}catch(e){return i}}},6230:function(e,t,i){var r=i(9022);function n(e){this.mode=r.NUMERIC,this.data=e.toString()}n.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(e){for(t=0;t+3<=this.data.length;t+=3)i=parseInt(this.data.substr(t,3),10),e.put(i,10);var t,i,r=this.data.length-t;r>0&&(i=parseInt(this.data.substr(t),10),e.put(i,3*r+1))},e.exports=n},93759:function(e,t,i){var r=i(25811),n=i(26708);t.mul=function(e,t){for(var i=r.alloc(e.length+t.length-1),s=0;s<e.length;s++)for(var o=0;o<t.length;o++)i[s+o]^=n.mul(e[s],t[o]);return i},t.mod=function(e,t){for(var i=r.from(e);i.length-t.length>=0;){for(var s=i[0],o=0;o<t.length;o++)i[o]^=n.mul(t[o],s);for(var a=0;a<i.length&&0===i[a];)a++;i=i.slice(a)}return i},t.generateECPolynomial=function(e){for(var i=r.from([1]),s=0;s<e;s++)i=t.mul(i,[1,n.exp(s)]);return i}},31352:function(e,t,i){var r=i(25811),n=i(66715),s=i(40244),o=i(57301),a=i(14164),c=i(78285),l=i(15503),h=i(25435),u=i(23637),p=i(80707),d=i(40778),g=i(51722),f=i(9022),m=i(86003),y=i(63433);function w(e,t,i){var r,n,s=e.size,o=g.getEncodedBits(t,i);for(r=0;r<15;r++)n=(o>>r&1)==1,r<6?e.set(r,8,n,!0):r<8?e.set(r+1,8,n,!0):e.set(s-15+r,8,n,!0),r<8?e.set(8,s-r-1,n,!0):r<9?e.set(8,15-r-1+1,n,!0):e.set(8,15-r-1,n,!0);e.set(s-8,8,1,!0)}t.create=function(e,t){if(void 0===e||""===e)throw Error("No input text");var i,g,_=s.M;return void 0!==t&&(_=s.from(t.errorCorrectionLevel,s.M),i=d.from(t.version),g=h.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),function(e,t,i,s){if(y(e))g=m.fromArray(e);else if("string"==typeof e){var g,_=t;if(!_){var v=m.rawSplit(e);_=d.getBestVersionForData(v,i)}g=m.fromString(e,_||40)}else throw Error("Invalid data");var b=d.getBestVersionForData(g,i);if(!b)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<b)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+b+".\n")}else t=b;var E=function(e,t,i){var s=new o;i.forEach(function(t){s.put(t.mode.bit,4),s.put(t.getLength(),f.getCharCountIndicator(t.mode,e)),t.write(s)});var a=(n.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t))*8;for(s.getLengthInBits()+4<=a&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(0);for(var c=(a-s.getLengthInBits())/8,l=0;l<c;l++)s.put(l%2?17:236,8);return function(e,t,i){for(var s,o,a=n.getSymbolTotalCodewords(t),c=a-u.getTotalCodewordsCount(t,i),l=u.getBlocksCount(t,i),h=a%l,d=l-h,g=Math.floor(a/l),f=Math.floor(c/l),m=f+1,y=g-f,w=new p(y),_=0,v=Array(l),b=Array(l),E=0,I=r.from(e.buffer),x=0;x<l;x++){var S=x<d?f:m;v[x]=I.slice(_,_+S),b[x]=w.encode(v[x]),_+=S,E=Math.max(E,S)}var R=r.alloc(a),P=0;for(s=0;s<E;s++)for(o=0;o<l;o++)s<v[o].length&&(R[P++]=v[o][s]);for(s=0;s<y;s++)for(o=0;o<l;o++)R[P++]=b[o][s];return R}(s,e,t)}(t,i,g),I=new a(n.getSymbolSize(t));return function(e,t){for(var i=e.size,r=l.getPositions(t),n=0;n<r.length;n++)for(var s=r[n][0],o=r[n][1],a=-1;a<=7;a++)if(!(s+a<=-1)&&!(i<=s+a))for(var c=-1;c<=7;c++)o+c<=-1||i<=o+c||(a>=0&&a<=6&&(0===c||6===c)||c>=0&&c<=6&&(0===a||6===a)||a>=2&&a<=4&&c>=2&&c<=4?e.set(s+a,o+c,!0,!0):e.set(s+a,o+c,!1,!0))}(I,t),function(e){for(var t=e.size,i=8;i<t-8;i++){var r=i%2==0;e.set(i,6,r,!0),e.set(6,i,r,!0)}}(I),function(e,t){for(var i=c.getPositions(t),r=0;r<i.length;r++)for(var n=i[r][0],s=i[r][1],o=-2;o<=2;o++)for(var a=-2;a<=2;a++)-2===o||2===o||-2===a||2===a||0===o&&0===a?e.set(n+o,s+a,!0,!0):e.set(n+o,s+a,!1,!0)}(I,t),w(I,i,0),t>=7&&function(e,t){for(var i,r,n,s=e.size,o=d.getEncodedBits(t),a=0;a<18;a++)i=Math.floor(a/3),r=a%3+s-8-3,n=(o>>a&1)==1,e.set(i,r,n,!0),e.set(r,i,n,!0)}(I,t),function(e,t){for(var i=e.size,r=-1,n=i-1,s=7,o=0,a=i-1;a>0;a-=2)for(6===a&&a--;;){for(var c=0;c<2;c++)if(!e.isReserved(n,a-c)){var l=!1;o<t.length&&(l=(t[o]>>>s&1)==1),e.set(n,a-c,l),-1==--s&&(o++,s=7)}if((n+=r)<0||i<=n){n-=r,r=-r;break}}}(I,E),isNaN(s)&&(s=h.getBestMask(I,w.bind(null,I,i))),h.applyMask(s,I),w(I,i,s),{modules:I,version:t,errorCorrectionLevel:i,maskPattern:s,segments:g}}(e,i,_,g)}},80707:function(e,t,i){var r=i(25811),n=i(93759),s=i(2780).lW;function o(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}o.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},o.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");var t=r.alloc(this.degree),i=s.concat([e,t],e.length+this.degree),o=n.mod(i,this.genPoly),a=this.degree-o.length;if(a>0){var c=r.alloc(this.degree);return o.copy(c,a),c}return o},e.exports=o},68649:function(e,t){var i="[0-9]+",r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",n="(?:(?![A-Z0-9 $%*+\\-./:]|"+(r=r.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=RegExp(r,"g"),t.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=RegExp(n,"g"),t.NUMERIC=RegExp(i,"g"),t.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");var s=RegExp("^"+r+"$"),o=RegExp("^"+i+"$"),a=RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return s.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return a.test(e)}},86003:function(e,t,i){var r=i(9022),n=i(6230),s=i(30049),o=i(90904),a=i(33415),c=i(68649),l=i(66715),h=i(35309);function u(e){return unescape(encodeURIComponent(e)).length}function p(e,t,i){for(var r,n=[];null!==(r=e.exec(i));)n.push({data:r[0],index:r.index,mode:t,length:r[0].length});return n}function d(e){var t,i,n=p(c.NUMERIC,r.NUMERIC,e),s=p(c.ALPHANUMERIC,r.ALPHANUMERIC,e);return l.isKanjiModeEnabled()?(t=p(c.BYTE,r.BYTE,e),i=p(c.KANJI,r.KANJI,e)):(t=p(c.BYTE_KANJI,r.BYTE,e),i=[]),n.concat(s,t,i).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function g(e,t){switch(t){case r.NUMERIC:return n.getBitsLength(e);case r.ALPHANUMERIC:return s.getBitsLength(e);case r.KANJI:return a.getBitsLength(e);case r.BYTE:return o.getBitsLength(e)}}function f(e,t){var i,c=r.getBestModeForData(e);if((i=r.from(t,c))!==r.BYTE&&i.bit<c.bit)throw Error('"'+e+'" cannot be encoded with mode '+r.toString(i)+".\n Suggested mode is: "+r.toString(c));switch(i!==r.KANJI||l.isKanjiModeEnabled()||(i=r.BYTE),i){case r.NUMERIC:return new n(e);case r.ALPHANUMERIC:return new s(e);case r.KANJI:return new a(e);case r.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(f(t,null)):t.data&&e.push(f(t.data,t.mode)),e},[])},t.fromString=function(e,i){for(var n=function(e,t){for(var i={},n={start:{}},s=["start"],o=0;o<e.length;o++){for(var a=e[o],c=[],l=0;l<a.length;l++){var h=a[l],u=""+o+l;c.push(u),i[u]={node:h,lastCount:0},n[u]={};for(var p=0;p<s.length;p++){var d=s[p];i[d]&&i[d].node.mode===h.mode?(n[d][u]=g(i[d].lastCount+h.length,h.mode)-g(i[d].lastCount,h.mode),i[d].lastCount+=h.length):(i[d]&&(i[d].lastCount=h.length),n[d][u]=g(h.length,h.mode)+4+r.getCharCountIndicator(h.mode,t))}}s=c}for(p=0;p<s.length;p++)n[s[p]].end=0;return{map:n,table:i}}(function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];switch(n.mode){case r.NUMERIC:t.push([n,{data:n.data,mode:r.ALPHANUMERIC,length:n.length},{data:n.data,mode:r.BYTE,length:n.length}]);break;case r.ALPHANUMERIC:t.push([n,{data:n.data,mode:r.BYTE,length:n.length}]);break;case r.KANJI:t.push([n,{data:n.data,mode:r.BYTE,length:u(n.data)}]);break;case r.BYTE:t.push([{data:n.data,mode:r.BYTE,length:u(n.data)}])}}return t}(d(e,l.isKanjiModeEnabled())),i),s=h.find_path(n.map,"start","end"),o=[],a=1;a<s.length-1;a++)o.push(n.table[s[a]].node);return t.fromArray(o.reduce(function(e,t){var i=e.length-1>=0?e[e.length-1]:null;return i&&i.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},t.rawSplit=function(e){return t.fromArray(d(e,l.isKanjiModeEnabled()))}},66715:function(e,t){var i,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return r[e]},t.getBCHDigit=function(e){for(var t=0;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');i=e},t.isKanjiModeEnabled=function(){return void 0!==i},t.toSJIS=function(e){return i(e)}},45514:function(e,t){t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},40778:function(e,t,i){var r=i(66715),n=i(23637),s=i(40244),o=i(9022),a=i(45514),c=i(63433),l=r.getBCHDigit(7973);function h(e,t){return o.getCharCountIndicator(e,t)+4}t.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,i){if(!a.isValid(e))throw Error("Invalid QR Code version");void 0===i&&(i=o.BYTE);var s=(r.getSymbolTotalCodewords(e)-n.getTotalCodewordsCount(e,t))*8;if(i===o.MIXED)return s;var c=s-h(i,e);switch(i){case o.NUMERIC:return Math.floor(c/10*3);case o.ALPHANUMERIC:return Math.floor(c/11*2);case o.KANJI:return Math.floor(c/13);case o.BYTE:default:return Math.floor(c/8)}},t.getBestVersionForData=function(e,i){var r,n=s.from(i,s.M);if(c(e)){if(e.length>1)return function(e,i){for(var r=1;r<=40;r++)if(function(e,t){var i=0;return e.forEach(function(e){var r=h(e.mode,t);i+=r+e.getBitsLength()}),i}(e,r)<=t.getCapacity(r,i,o.MIXED))return r}(e,n);if(0===e.length)return 1;r=e[0]}else r=e;return function(e,i,r){for(var n=1;n<=40;n++)if(i<=t.getCapacity(n,r,e))return n}(r.mode,r.getLength(),n)},t.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw Error("Invalid QR Code version");for(var t=e<<12;r.getBCHDigit(t)-l>=0;)t^=7973<<r.getBCHDigit(t)-l;return e<<12|t}},94898:function(e,t,i){var r=i(63037);t.render=function(e,t,i){var n,s=i,o=t;void 0!==s||t&&t.getContext||(s=t,t=void 0),t||(o=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),s=r.getOptions(s);var a=r.getImageWidth(e.modules.size,s),c=o.getContext("2d"),l=c.createImageData(a,a);return r.qrToImageData(l.data,e,s),n=o,c.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=a,n.width=a,n.style.height=a+"px",n.style.width=a+"px",c.putImageData(l,0,0),o},t.renderToDataURL=function(e,i,r){var n=r;void 0!==n||i&&i.getContext||(n=i,i=void 0),n||(n={});var s=t.render(e,i,n),o=n.type||"image/png",a=n.rendererOpts||{};return s.toDataURL(o,a.quality)}},38852:function(e,t,i){var r=i(63037);function n(e,t){var i=e.a/255,r=t+'="'+e.hex+'"';return i<1?r+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':r}function s(e,t,i){var r=e+t;return void 0!==i&&(r+=" "+i),r}t.render=function(e,t,i){var o=r.getOptions(t),a=e.modules.size,c=e.modules.data,l=a+2*o.margin,h=o.color.light.a?"<path "+n(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+n(o.color.dark,"stroke")+' d="'+function(e,t,i){for(var r="",n=0,o=!1,a=0,c=0;c<e.length;c++){var l=Math.floor(c%t),h=Math.floor(c/t);l||o||(o=!0),e[c]?(a++,c>0&&l>0&&e[c-1]||(r+=o?s("M",l+i,.5+h+i):s("m",n,0),n=0,o=!1),l+1<t&&e[c+1]||(r+=s("h",a),a=0)):n++}return r}(c,a,o.margin)+'"/>',p='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+('viewBox="0 0 '+l)+" "+l+'" shape-rendering="crispEdges">'+h+u+"</svg>\n";return"function"==typeof i&&i(null,p),p}},63037:function(e,t){function i(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");var t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");var i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});var t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,n=e.scale||4;return{width:r,scale:r?4:n,margin:t,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,i){var r=t.getScale(e,i);return Math.floor((e+2*i.margin)*r)},t.qrToImageData=function(e,i,r){for(var n=i.modules.size,s=i.modules.data,o=t.getScale(n,r),a=Math.floor((n+2*r.margin)*o),c=r.margin*o,l=[r.color.light,r.color.dark],h=0;h<a;h++)for(var u=0;u<a;u++){var p=(h*a+u)*4,d=r.color.light;h>=c&&u>=c&&h<a-c&&u<a-c&&(d=l[s[Math.floor((h-c)/o)*n+Math.floor((u-c)/o)]?1:0]),e[p++]=d.r,e[p++]=d.g,e[p++]=d.b,e[p]=d.a}}},25811:function(e,t,i){"use strict";var r=i(63433);s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}();var n=s.TYPED_ARRAY_SUPPORT?2147483647:1073741823;function s(e,t,i){return s.TYPED_ARRAY_SUPPORT||this instanceof s?"number"==typeof e?c(this,e):function(e,t,i,r){if("number"==typeof t)throw TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer)return function(e,t,i,r){var n;if(i<0||t.byteLength<i)throw RangeError("'offset' is out of bounds");if(t.byteLength<i+(r||0))throw RangeError("'length' is out of bounds");return n=void 0===i&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,i):new Uint8Array(t,i,r),s.TYPED_ARRAY_SUPPORT?n.__proto__=s.prototype:n=l(e,n),n}(e,t,i,r);if("string"==typeof t){var n,c,h;return(h=(c=a(e,n=0|u(t))).write(t))!==n&&(c=c.slice(0,h)),c}return function(e,t){if(s.isBuffer(t)){var i,r=0|o(t.length),n=a(e,r);return 0===n.length||t.copy(n,0,0,r),n}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):l(e,t);if("Buffer"===t.type&&Array.isArray(t.data))return l(e,t.data)}throw TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}(this,e,t,i):new s(e,t,i)}function o(e){if(e>=n)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|e}function a(e,t){var i;return s.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(t)).__proto__=s.prototype:(null===(i=e)&&(i=new s(t)),i.length=t),i}function c(e,t){var i=a(e,t<0?0:0|o(t));if(!s.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)i[r]=0;return i}function l(e,t){for(var i=t.length<0?0:0|o(t.length),r=a(e,i),n=0;n<i;n+=1)r[n]=255&t[n];return r}function h(e,t){t=t||1/0;for(var i,r=e.length,n=null,s=[],o=0;o<r;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319||o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function u(e){return s.isBuffer(e)?e.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)?e.byteLength:("string"!=typeof e&&(e=""+e),0===e.length)?0:h(e).length}s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),s.prototype.write=function(e,t,i){void 0===t?(i=this.length,t=0):void 0===i&&"string"==typeof t?(i=this.length,t=0):isFinite(t)&&(t|=0,isFinite(i)?i|=0:i=void 0);var r,n,s=this.length-t;if((void 0===i||i>s)&&(i=s),e.length>0&&(i<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");return r=t,n=i,function(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length)&&!(n>=e.length);++n)t[n+i]=e[n];return n}(h(e,this.length-r),this,r,n)},s.prototype.slice=function(e,t){var i,r=this.length;if(e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=s.prototype;else{var n=t-e;i=new s(n,void 0);for(var o=0;o<n;++o)i[o]=this[o+e]}return i},s.prototype.copy=function(e,t,i,r){if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("sourceStart out of bounds");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n,o=r-i;if(this===e&&i<t&&t<r)for(n=o-1;n>=0;--n)e[n+t]=this[n+i];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(n=0;n<o;++n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+o),t);return o},s.prototype.fill=function(e,t,i){if("string"==typeof e){if("string"==typeof t?(t=0,i=this.length):"string"==typeof i&&(i=this.length),1===e.length){var r,n=e.charCodeAt(0);n<256&&(e=n)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(r=t;r<i;++r)this[r]=e;else{var o=s.isBuffer(e)?e:new s(e),a=o.length;for(r=0;r<i-t;++r)this[r+t]=o[r%a]}return this},s.concat=function(e,t){if(!r(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a(null,0);if(void 0===t)for(i=0,t=0;i<e.length;++i)t+=e[i].length;var i,n=c(null,t),o=0;for(i=0;i<e.length;++i){var l=e[i];if(!s.isBuffer(l))throw TypeError('"list" argument must be an Array of Buffers');l.copy(n,o),o+=l.length}return n},s.byteLength=u,s.prototype._isBuffer=!0,s.isBuffer=function(e){return!!(null!=e&&e._isBuffer)},e.exports.alloc=function(e){var t=new s(e);return t.fill(0),t},e.exports.from=function(e){return new s(e)}},7238:function(e,t,i){"use strict";var r=i(24806),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var i,s,o,a,c,l,h,u,p=!1;t||(t={}),o=t.debug||!1;try{if(c=r(),l=document.createRange(),h=document.getSelection(),(u=document.createElement("span")).textContent=e,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(i){if(i.stopPropagation(),t.format){if(i.preventDefault(),void 0===i.clipboardData){o&&console.warn("unable to use e.clipboardData"),o&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=n[t.format]||n.default;window.clipboardData.setData(r,e)}else i.clipboardData.clearData(),i.clipboardData.setData(t.format,e)}t.onCopy&&(i.preventDefault(),t.onCopy(i.clipboardData))}),document.body.appendChild(u),l.selectNodeContents(u),h.addRange(l),!document.execCommand("copy"))throw Error("copy command was unsuccessful");p=!0}catch(r){o&&console.error("unable to copy using execCommand: ",r),o&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),p=!0}catch(r){o&&console.error("unable to copy using clipboardData: ",r),o&&console.error("falling back to prompt"),i="message"in t?t.message:"Copy to clipboard: #{key}, Enter",s=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",a=i.replace(/#{\s*key\s*}/g,s),window.prompt(a,e)}}finally{h&&("function"==typeof h.removeRange?h.removeRange(l):h.removeAllRanges()),u&&document.body.removeChild(u),c()}return p}},63433:function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},24806:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,i=[],r=0;r<e.rangeCount;r++)i.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||i.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},21941:function(e,t,i){"use strict";i.d(t,{WalletConnectChainID:function(){return s},WalletConnectWallet:function(){return ih}});var r,n,s,o,a=i(16636),c=i(79550),l=i(63606),h=i.n(l),u=i(92112),p=i(97362),d=i(11328);class g extends d.q{constructor(e){super()}}let f=p.FIVE_SECONDS,m="heartbeat_pulse";class y extends g{constructor(e){super(e),this.events=new l.EventEmitter,this.interval=f,this.interval=e?.interval||f}static async init(e){let t=new y(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),(0,p.toMiliseconds)(this.interval))}pulse(){this.events.emit(m)}}var w=i(29830);class _ extends d.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class v extends d.q{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class b{constructor(e,t){this.logger=e,this.core=t}}class E extends d.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class I extends d.q{constructor(e){super()}}class x{constructor(e,t,i,r){this.core=e,this.logger=t,this.name=i}}class S extends d.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class R extends d.q{constructor(e,t){super(),this.core=e,this.logger=t}}class P{constructor(e,t){this.projectId=e,this.logger=t}}class C{constructor(e,t){this.projectId=e,this.logger=t}}class T{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class N{constructor(e){this.client=e}}var k=i(7962),A=i(99987),O=i(34496),q=i(4413),D=i(92071),M=i(7765),U=i(36665),L=i(81965),B=i.n(L),z=i(57371),$=i.n(z),j=i(68571),V=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var i=new Uint8Array(256),r=0;r<i.length;r++)i[r]=255;for(var n=0;n<e.length;n++){var s=e.charAt(n),o=s.charCodeAt(0);if(255!==i[o])throw TypeError(s+" is ambiguous");i[o]=n}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),h=Math.log(256)/Math.log(a);function u(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var r=0,n=0;e[t]===c;)r++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var h=i[e.charCodeAt(t)];if(255===h)return;for(var u=0,p=s-1;(0!==h||u<n)&&-1!==p;p--,u++)h+=a*o[p]>>>0,o[p]=h%256>>>0,h=h/256>>>0;if(0!==h)throw Error("Non-zero carry");n=u,t++}if(" "!==e[t]){for(var d=s-n;d!==s&&0===o[d];)d++;for(var g=new Uint8Array(r+(s-d)),f=r;d!==s;)g[f++]=o[d++];return g}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var i=0,r=0,n=0,s=t.length;n!==s&&0===t[n];)n++,i++;for(var o=(s-n)*h+1>>>0,l=new Uint8Array(o);n!==s;){for(var u=t[n],p=0,d=o-1;(0!==u||p<r)&&-1!==d;d--,p++)u+=256*l[d]>>>0,l[d]=u%a>>>0,u=u/a>>>0;if(0!==u)throw Error("Non-zero carry");r=p,n++}for(var g=o-r;g!==o&&0===l[g];)g++;for(var f=c.repeat(i);g<o;++g)f+=e.charAt(l[g]);return f},decodeUnsafe:u,decode:function(e){var i=u(e);if(i)return i;throw Error(`Non-${t} character`)}}};let F=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},K=e=>new TextEncoder().encode(e),H=e=>new TextDecoder().decode(e);class J{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class W{constructor(e,t,i){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Q(this,e)}}class Y{constructor(e){this.decoders=e}or(e){return Q(this,e)}decode(e){let t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let Q=(e,t)=>new Y({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class G{constructor(e,t,i,r){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=r,this.encoder=new J(e,t,i),this.decoder=new W(e,t,r)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let Z=({name:e,prefix:t,encode:i,decode:r})=>new G(e,t,i,r),X=({prefix:e,name:t,alphabet:i})=>{let{encode:r,decode:n}=V(i,t);return Z({prefix:e,name:t,encode:r,decode:e=>F(n(e))})},ee=(e,t,i,r)=>{let n={};for(let e=0;e<t.length;++e)n[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*i/8|0),a=0,c=0,l=0;for(let t=0;t<s;++t){let s=n[e[t]];if(void 0===s)throw SyntaxError(`Non-${r} character`);c=c<<i|s,(a+=i)>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=i||255&c<<8-a)throw SyntaxError("Unexpected end of data");return o},et=(e,t,i)=>{let r="="===t[t.length-1],n=(1<<i)-1,s="",o=0,a=0;for(let r=0;r<e.length;++r)for(a=a<<8|e[r],o+=8;o>i;)o-=i,s+=t[n&a>>o];if(o&&(s+=t[n&a<<i-o]),r)for(;s.length*i&7;)s+="=";return s},ei=({name:e,prefix:t,bitsPerChar:i,alphabet:r})=>Z({prefix:t,name:e,encode:e=>et(e,r,i),decode:t=>ee(t,r,i,e)});var er=Object.freeze({__proto__:null,identity:Z({prefix:"\0",name:"identity",encode:e=>H(e),decode:e=>K(e)})}),en=Object.freeze({__proto__:null,base2:ei({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})}),es=Object.freeze({__proto__:null,base8:ei({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})}),eo=Object.freeze({__proto__:null,base10:X({prefix:"9",name:"base10",alphabet:"0123456789"})}),ea=Object.freeze({__proto__:null,base16:ei({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper:ei({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});let ec=ei({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),el=ei({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eh=ei({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eu=ei({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ep=ei({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ed=ei({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});var eg=Object.freeze({__proto__:null,base32:ec,base32upper:el,base32pad:eh,base32padupper:eu,base32hex:ep,base32hexupper:ed,base32hexpad:ei({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper:ei({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z:ei({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})}),ef=Object.freeze({__proto__:null,base36:X({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper:X({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})}),em=Object.freeze({__proto__:null,base58btc:X({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr:X({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});let ey=ei({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});var ew=Object.freeze({__proto__:null,base64:ey,base64pad:ei({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url:ei({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad:ei({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});let e_=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),ev=e_.reduce((e,t,i)=>(e[i]=t,e),[]),eb=e_.reduce((e,t,i)=>(e[t.codePointAt(0)]=i,e),[]);var eE=Object.freeze({__proto__:null,base256emoji:Z({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=ev[t],"")},decode:function(e){let t=[];for(let i of e){let e=eb[i.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${i}`);t.push(e)}return new Uint8Array(t)}})});function eI(e,t){var i,r=0,t=t||0,n=0,s=t,o=e.length;do{if(s>=o)throw eI.bytes=0,RangeError("Could not decode varint");i=e[s++],r+=n<28?(127&i)<<n:(127&i)*Math.pow(2,n),n+=7}while(i>=128);return eI.bytes=s-t,r}var ex=function e(t,i,r){i=i||[],r=r||0;for(var n=r;t>=2147483648;)i[r++]=255&t|128,t/=128;for(;-128&t;)i[r++]=255&t|128,t>>>=7;return i[r]=0|t,e.bytes=r-n+1,i};let eS=(e,t,i=0)=>(ex(e,t,i),t),eR=e=>e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10,eP=(e,t)=>{let i=t.byteLength,r=eR(e),n=r+eR(i),s=new Uint8Array(n+i);return eS(e,s,0),eS(i,s,r),s.set(t,n),new eC(e,i,t,s)};class eC{constructor(e,t,i,r){this.code=e,this.size=t,this.digest=i,this.bytes=r}}let eT=({name:e,code:t,encode:i})=>new eN(e,t,i);class eN{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?eP(this.code,t):t.then(e=>eP(this.code,e))}throw Error("Unknown type, must be binary type")}}let ek=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t));var eA=Object.freeze({__proto__:null,sha256:eT({name:"sha2-256",code:18,encode:ek("SHA-256")}),sha512:eT({name:"sha2-512",code:19,encode:ek("SHA-512")})}),eO=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:F,digest:e=>eP(0,F(e))}});new TextEncoder,new TextDecoder;let eq={...er,...en,...es,...eo,...ea,...eg,...ef,...em,...ew,...eE};function eD(e,t,i,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:i},decoder:{decode:r}}}({...eA,...eO});let eM=eD("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),eU=eD("ascii","a",e=>{let t="a";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e=>{let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}),eL={utf8:eM,"utf-8":eM,hex:eq.base16,latin1:eU,ascii:eU,binary:eU,...eq},eB="core",ez=`wc@2:${eB}:`,e$={logger:"error"},ej={database:":memory:"},eV="client_ed25519_seed",eF=p.ONE_DAY,eK=p.SIX_HOURS,eH="wss://relay.walletconnect.com",eJ="wss://relay.walletconnect.org",eW={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",publish:"relayer_publish"},eY={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},eQ=p.ONE_SECOND,eG={created:"subscription_created",deleted:"subscription_deleted",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},eZ=1e3*p.FIVE_SECONDS,eX={wc_pairingDelete:{req:{ttl:p.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:p.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:p.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:p.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:p.ONE_DAY,prompt:!1,tag:0},res:{ttl:p.ONE_DAY,prompt:!1,tag:0}}},e0={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},e1={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},e2={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},e6="verify-api",e5="https://verify.walletconnect.com",e4="https://verify.walletconnect.org",e3=[e5,e4];class e8{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=ez,this.init=async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=(0,w.Ep)(t,this.name)}get context(){return(0,w.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,(0,O.KCv)(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?(0,O.IPd)(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}}class e9{constructor(e,t,i){this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>{this.isInitialized();let e=await this.getClientSeed(),t=A.generateKeyPair(e);return A.encodeIss(t.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let e=(0,O.Au2)();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();let t=await this.getClientSeed(),i=A.generateKeyPair(t),r=(0,O.jdp)();return await A.signJWT(r,e,eF,i)},this.generateSharedKey=(e,t,i)=>{this.isInitialized();let r=this.getPrivateKey(e),n=(0,O.m$A)(r,t);return this.setSymKey(n,i)},this.setSymKey=async(e,t)=>{this.isInitialized();let i=t||(0,O.YmJ)(e);return await this.keychain.set(i,e),i},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,i)=>{this.isInitialized();let r=(0,O.ENt)(i),n=(0,k.u)(t);if((0,O.Q8x)(r)){let t=r.senderPublicKey,i=r.receiverPublicKey;e=await this.generateSharedKey(t,i)}let s=this.getSymKey(e),{type:o,senderPublicKey:a}=r;return(0,O.HIp)({type:o,symKey:s,message:n,senderPublicKey:a})},this.decode=async(e,t,i)=>{this.isInitialized();let r=(0,O.Llj)(t,i);if((0,O.Q8x)(r)){let t=r.receiverPublicKey,i=r.senderPublicKey;e=await this.generateSharedKey(t,i)}try{let i=this.getSymKey(e),r=(0,O.peR)({symKey:i,encoded:t});return(0,k.D)(r)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}},this.getPayloadType=e=>{let t=(0,O.vBi)(e);return(0,O.WGe)(t.type)},this.getPayloadSenderPublicKey=e=>{let t=(0,O.vBi)(e);return t.senderPublicKey?(0,q.BB)(t.senderPublicKey,O.AWt):void 0},this.core=e,this.logger=(0,w.Ep)(t,this.name),this.keychain=i||new e8(this.core,this.logger)}get context(){return(0,w.Fd)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(eV)}catch{e=(0,O.jdp)(),await this.keychain.set(eV,e)}return function(e,t="utf8"){let i=eL[t];if(!i)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):i.decoder.decode(`${i.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}}class e7 extends b{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=ez,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();let i=(0,O.rjm)(t),r=this.messages.get(e);return typeof r>"u"&&(r={}),"u">typeof r[i]||(r[i]=t,this.messages.set(e,r),await this.persist()),i},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>(this.isInitialized(),"u">typeof this.get(e)[(0,O.rjm)(t)]),this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=(0,w.Ep)(e,this.name),this.core=t}get context(){return(0,w.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,(0,O.KCv)(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?(0,O.IPd)(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}}class te extends E{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new l.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,p.toMiliseconds)(p.ONE_MINUTE),this.failedPublishTimeout=(0,p.toMiliseconds)(p.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(e,t,i)=>{var r;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:i}});let n=i?.ttl||eK,s=(0,O._HE)(i),o=i?.prompt||!1,a=i?.tag||0,c=i?.id||(0,M.getBigIntRpcId)().toString(),l={topic:e,message:t,opts:{ttl:n,relay:s,prompt:o,tag:a,id:c}},h=`Failed to publish payload, please try again. id:${c} tag:${a}`,u=Date.now(),p,d=1;try{for(;void 0===p;){if(Date.now()-u>this.publishTimeout)throw Error(h);this.logger.trace({id:c,attempts:d},`publisher.publish - attempt ${d}`),p=await await (0,O.hFY)(this.rpcPublish(e,t,n,s,o,a,c).catch(e=>this.logger.warn(e)),this.publishTimeout,h),d++,p||await new Promise(e=>setTimeout(e,this.failedPublishTimeout))}this.relayer.events.emit(eW.publish,l),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:i}})}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(r=i?.internal)&&r.throwOnFailedPublish)throw e;this.queue.set(c,l)}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=(0,w.Ep)(t,this.name),this.registerEventListeners()}get context(){return(0,w.Fd)(this.logger)}rpcPublish(e,t,i,r,n,s,o){var a,c,l,h;let u={method:(0,O.cOS)(r.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:n,tag:s},id:o};return(0,O.o8e)(null==(a=u.params)?void 0:a.prompt)&&(null==(c=u.params)||delete c.prompt),(0,O.o8e)(null==(l=u.params)?void 0:l.tag)&&(null==(h=u.params)||delete h.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:u}),this.relayer.request(u)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:t,message:i,opts:r}=e;await this.publish(t,i,r)})}registerEventListeners(){this.relayer.core.heartbeat.on(m,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(eW.connection_stalled);return}this.checkQueue()}),this.relayer.on(eW.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class tt{constructor(){this.map=new Map,this.set=(e,t)=>{let i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let i=this.get(e);if(!this.exists(e,t))return;let r=i.filter(e=>e!==t);if(!r.length){this.map.delete(e);return}this.map.set(e,r)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var ti=Object.defineProperty,tr=Object.defineProperties,tn=Object.getOwnPropertyDescriptors,ts=Object.getOwnPropertySymbols,to=Object.prototype.hasOwnProperty,ta=Object.prototype.propertyIsEnumerable,tc=(e,t,i)=>t in e?ti(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,tl=(e,t)=>{for(var i in t||(t={}))to.call(t,i)&&tc(e,i,t[i]);if(ts)for(var i of ts(t))ta.call(t,i)&&tc(e,i,t[i]);return e},th=(e,t)=>tr(e,tn(t));class tu extends S{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new tt,this.events=new l.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=ez,this.subscribeTimeout=(0,p.toMiliseconds)(p.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let i=(0,O._HE)(t),r={topic:e,relay:i};this.pending.set(e,r);let n=await this.rpcSubscribe(e,i);return"string"==typeof n&&(this.onSubscribe(n,r),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),n}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>{if(this.topics.includes(e))return!0;let t=`${this.pendingSubscriptionWatchLabel}_${e}`;return await new Promise((i,r)=>{let n=new p.Watch;n.start(t);let s=setInterval(()=>{!this.pending.has(e)&&this.topics.includes(e)&&(clearInterval(s),n.stop(t),i(!0)),n.elapsed(t)>=eZ&&(clearInterval(s),n.stop(t),r(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,w.Ep)(t,this.name),this.clientId=""}get context(){return(0,w.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let i=this.topicMap.get(e);await Promise.all(i.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{let r=(0,O._HE)(i);await this.rpcUnsubscribe(e,t,r);let n=(0,O.D6H)("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,n),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t){let i={method:(0,O.cOS)(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await (0,O.hFY)(this.relayer.request(i).catch(e=>this.logger.warn(e)),this.subscribeTimeout)?(0,O.rjm)(e+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(eW.connection_stalled)}return null}async rpcBatchSubscribe(e){if(!e.length)return;let t=e[0].relay,i={method:(0,O.cOS)(t.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await (0,O.hFY)(this.relayer.request(i).catch(e=>this.logger.warn(e)),this.subscribeTimeout)}catch{this.relayer.events.emit(eW.connection_stalled)}}async rpcBatchFetchMessages(e){let t;if(!e.length)return;let i=e[0].relay,r={method:(0,O.cOS)(i.protocol).batchFetchMessages,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{t=await await (0,O.hFY)(this.relayer.request(r).catch(e=>this.logger.warn(e)),this.subscribeTimeout)}catch{this.relayer.events.emit(eW.connection_stalled)}return t}rpcUnsubscribe(e,t,i){let r={method:(0,O.cOS)(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),this.relayer.request(r)}onSubscribe(e,t){this.setSubscription(e,th(tl({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,tl({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,tl({},t)),this.topicMap.set(t.topic,e),this.events.emit(eG.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(eG.deleted,th(tl({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(eG.sync)}async reset(){if(this.cached.length){let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){let e=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(e),await this.batchSubscribe(e)}}this.events.emit(eG.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=(0,O.kCb)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;let t=await this.rpcBatchSubscribe(e);(0,O.qt8)(t)&&this.onBatchSubscribe(t.map((t,i)=>th(tl({},e[i]),{id:t})))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);let t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(t.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(m,async()=>{await this.checkPending()}),this.events.on(eG.created,async e=>{let t=eG.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(eG.deleted,async e=>{let t=eG.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{let t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var tp=Object.defineProperty,td=Object.getOwnPropertySymbols,tg=Object.prototype.hasOwnProperty,tf=Object.prototype.propertyIsEnumerable,tm=(e,t,i)=>t in e?tp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ty=(e,t)=>{for(var i in t||(t={}))tg.call(t,i)&&tm(e,i,t[i]);if(td)for(var i of td(t))tf.call(t,i)&&tm(e,i,t[i]);return e};class tw extends I{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new l.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=(0,p.toMiliseconds)(p.THIRTY_SECONDS+p.ONE_SECOND),this.request=async e=>{var t,i;this.logger.debug("Publishing Request Payload");let r=e.id||(0,M.getBigIntRpcId)().toString();await this.toEstablishConnection();try{let n=this.provider.request(e);this.requestsInFlight.set(r,{promise:n,request:e}),this.logger.trace({id:r,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - attempt to publish...");let s=await new Promise(async(e,t)=>{let i=()=>{t(Error(`relayer.request - publish interrupted, id: ${r}`))};this.provider.on(eY.disconnect,i);let s=await n;this.provider.off(eY.disconnect,i),e(s)});return this.logger.trace({id:r,method:e.method,topic:null==(i=e.params)?void 0:i.topic},"relayer.request - published"),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${r}`),e}finally{this.requestsInFlight.delete(r)}},this.resetPingTimeout=()=>{if((0,O.UGU)())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,t,i;null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)||i.terminate()},this.heartBeatTimeout)}catch(e){this.logger.warn(e)}},this.onPayloadHandler=e=>{this.onProviderPayload(e),this.resetPingTimeout()},this.onConnectHandler=()=>{this.startPingTimeout(),this.events.emit(eW.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit(eW.error,e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(eY.payload,this.onPayloadHandler),this.provider.on(eY.connect,this.onConnectHandler),this.provider.on(eY.disconnect,this.onDisconnectHandler),this.provider.on(eY.error,this.onProviderErrorHandler)},this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?(0,w.Ep)(e.logger,this.name):(0,w.gw)((0,w.jI)({level:e.logger||"error"})),this.messages=new e7(this.logger,e.core),this.subscriber=new tu(this,this.logger),this.publisher=new te(this,this.logger),this.relayUrl=e?.relayUrl||eH,this.projectId=e.projectId,this.bundleId=(0,O.X_B)(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${eJ}...`),await this.restartTransport(eJ)}this.initialized=!0,setTimeout(async()=>{0===this.subscriber.topics.length&&0===this.subscriber.pending.size&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},1e4)}get context(){return(0,w.Fd)(this.logger)}get connected(){var e,t,i;return(null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:i.readyState)===1}get connecting(){var e,t,i;return(null==(i=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:i.readyState)===0}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let r=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"",n,s=t=>{t.topic===e&&(this.subscriber.off(eG.created,s),n())};return await Promise.all([new Promise(e=>{n=e,this.subscriber.on(eG.created,s)}),new Promise(async i=>{r=await this.subscriber.subscribe(e,t)||r,i()})]),r}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(e=>e.promise))}catch(e){this.logger.warn(e)}this.hasExperiencedNetworkDisruption||this.connected?await (0,O.hFY)(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(e,t)=>{let i=()=>{this.provider.off(eY.disconnect,i),t(Error("Connection interrupted while trying to subscribe"))};this.provider.on(eY.disconnect,i),await (0,O.hFY)(this.provider.connect(),(0,p.toMiliseconds)(p.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>{t(e)}),await this.subscriber.start(),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){if(this.logger.error(e),this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(e.message))throw e}finally{this.connectionAttemptInProgress=!1}}async restartTransport(e){this.connectionAttemptInProgress||(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await (0,O.Ggh)())throw Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(e?.length===0){this.logger.trace("Batch message events is empty. Ignoring...");return}let t=e.sort((e,t)=>e.publishedAt-t.publishedAt);for(let e of(this.logger.trace(`Batch of ${t.length} message events sorted`),t))try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e)}this.logger.trace(`Batch of ${t.length} message events processed`)}startPingTimeout(){var e,t,i,r,n;if((0,O.UGU)())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(n=null==(r=null==(i=this.provider)?void 0:i.connection)?void 0:r.socket)||n.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(e){this.logger.warn(e)}}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new D.r(new U.Z((0,O.$0m)({sdkVersion:"2.13.3",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){let{topic:t,message:i}=e;if(!i||0===i.length)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;let r=this.messages.has(t,i);return r&&this.logger.debug(`Ignoring duplicate message: ${i}`),r}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,M.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:i,message:r,publishedAt:n}=t.data,s={topic:i,message:r,publishedAt:n};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(ty({type:"event",event:t.id},s)),this.events.emit(t.id,s),await this.acknowledgePayload(e),await this.onMessageEvent(s)}else(0,M.isJsonRpcResponse)(e)&&this.events.emit(eW.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(eW.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let t=(0,M.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(eY.payload,this.onPayloadHandler),this.provider.off(eY.connect,this.onConnectHandler),this.provider.off(eY.disconnect,this.onDisconnectHandler),this.provider.off(eY.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await (0,O.Ggh)();(0,O.uwg)(async t=>{e!==t&&(e=t,t?await this.restartTransport().catch(e=>this.logger.error(e)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(eW.disconnect),this.connectionAttemptInProgress=!1,this.transportExplicitlyClosed||setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e))},(0,p.toMiliseconds)(eQ))}isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),this.connected||(this.connectionAttemptInProgress&&await new Promise(e=>{let t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var t_=Object.defineProperty,tv=Object.getOwnPropertySymbols,tb=Object.prototype.hasOwnProperty,tE=Object.prototype.propertyIsEnumerable,tI=(e,t,i)=>t in e?t_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,tx=(e,t)=>{for(var i in t||(t={}))tb.call(t,i)&&tI(e,i,t[i]);if(tv)for(var i of tv(t))tE.call(t,i)&&tI(e,i,t[i]);return e};class tS extends x{constructor(e,t,i,r=ez,n){super(e,t,i,r),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=ez,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{this.getKey&&null!==e&&!(0,O.o8e)(e)?this.map.set(this.getKey(e),e):(0,O.xWS)(e)?this.map.set(e.id,e):(0,O.h1R)(e)&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(i=>B()(t[i],e[i]))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let i=tx(tx({},this.getData(e)),t);this.map.set(e,i),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())},this.logger=(0,w.Ep)(t,this.name),this.storagePrefix=r,this.getKey=n}get context(){return(0,w.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),Error(t)}let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=(0,O.kCb)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}}class tR{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(h()),this.initialized=!1,this.storagePrefix=ez,this.ignoredPayloadTypes=[O.rVF],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]},this.create=async e=>{this.isInitialized();let t=(0,O.jdp)(),i=await this.core.crypto.setSymKey(t),r=(0,O.gn4)(p.FIVE_MINUTES),n={protocol:"irn"},s=(0,O.Bvr)({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:t,relay:n,expiryTimestamp:r,methods:e?.methods});return this.core.expirer.set(i,r),await this.pairings.set(i,{topic:i,expiry:r,relay:n,active:!1}),await this.core.relayer.subscribe(i),{topic:i,uri:s}},this.pair=async e=>{this.isInitialized(),this.isValidPair(e);let{topic:t,symKey:i,relay:r,expiryTimestamp:n,methods:s}=(0,O.heJ)(e.uri);if(this.pairings.keys.includes(t)&&this.pairings.get(t).active)throw Error(`Pairing already exists: ${t}. Please try again with a new connection URI.`);let o=n||(0,O.gn4)(p.FIVE_MINUTES),a={topic:t,relay:r,expiry:o,active:!1,methods:s};return this.core.expirer.set(t,o),await this.pairings.set(t,a),e.activatePairing&&await this.activate({topic:t}),this.events.emit(e0.create,a),this.core.crypto.keychain.has(t)||await this.core.crypto.setSymKey(i,t),await this.core.relayer.subscribe(t,{relay:r}),a},this.activate=async({topic:e})=>{this.isInitialized();let t=(0,O.gn4)(p.THIRTY_DAYS);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:i,resolve:r,reject:n}=(0,O.H1S)();this.events.once((0,O.E0T)("pairing_ping",e),({error:e})=>{e?n(e):r()}),await i()}},this.updateExpiry=async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})},this.updateMetadata=async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",(0,O.D6H)("USER_DISCONNECTED")),await this.deletePairing(t))},this.sendRequest=async(e,t,i)=>{let r=(0,M.formatJsonRpcRequest)(t,i),n=await this.core.crypto.encode(e,r),s=eX[t].req;return this.core.history.set(e,r),this.core.relayer.publish(e,n,s),r.id},this.sendResult=async(e,t,i)=>{let r=(0,M.formatJsonRpcResult)(e,i),n=await this.core.crypto.encode(t,r),s=eX[(await this.core.history.get(t,e)).request.method].res;await this.core.relayer.publish(t,n,s),await this.core.history.resolve(r)},this.sendError=async(e,t,i)=>{let r=(0,M.formatJsonRpcError)(e,i),n=await this.core.crypto.encode(t,r),s=await this.core.history.get(t,e),o=eX[s.request.method]?eX[s.request.method].res:eX.unregistered_method.res;await this.core.relayer.publish(t,n,o),await this.core.history.resolve(r)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,(0,O.D6H)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{let e=this.pairings.getAll().filter(e=>(0,O.BwD)(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))},this.onRelayEventRequest=e=>{let{topic:t,payload:i}=e;switch(i.method){case"wc_pairingPing":return this.onPairingPingRequest(t,i);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,i);default:return this.onUnknownRpcMethodRequest(t,i)}},this.onRelayEventResponse=async e=>{let{topic:t,payload:i}=e,r=(await this.core.history.get(t,i.id)).request.method;return"wc_pairingPing"===r?this.onPairingPingResponse(t,i):this.onUnknownRpcMethodResponse(r)},this.onPairingPingRequest=async(e,t)=>{let{id:i}=t;try{this.isValidPing({topic:e}),await this.sendResult(i,e,!0),this.events.emit(e0.ping,{id:i,topic:e})}catch(t){await this.sendError(i,e,t),this.logger.error(t)}},this.onPairingPingResponse=(e,t)=>{let{id:i}=t;setTimeout(()=>{(0,M.isJsonRpcResult)(t)?this.events.emit((0,O.E0T)("pairing_ping",i),{}):(0,M.isJsonRpcError)(t)&&this.events.emit((0,O.E0T)("pairing_ping",i),{error:t.error})},500)},this.onPairingDeleteRequest=async(e,t)=>{let{id:i}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(e0.delete,{id:i,topic:e})}catch(t){await this.sendError(i,e,t),this.logger.error(t)}},this.onUnknownRpcMethodRequest=async(e,t)=>{let{id:i,method:r}=t;try{if(this.registeredMethods.includes(r))return;let t=(0,O.D6H)("WC_METHOD_UNSUPPORTED",r);await this.sendError(i,e,t),this.logger.error(t)}catch(t){await this.sendError(i,e,t),this.logger.error(t)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error((0,O.D6H)("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=e=>{var t;if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`pair() params: ${e}`);throw Error(t)}if(!(0,O.jvJ)(e.uri)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw Error(t)}let i=(0,O.heJ)(e.uri);if(!(null!=(t=i?.relay)&&t.protocol)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID","pair() uri#relay-protocol");throw Error(e)}if(!(null!=i&&i.symKey)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID","pair() uri#symKey");throw Error(e)}if(null!=i&&i.expiryTimestamp&&(0,p.toMiliseconds)(i?.expiryTimestamp)<Date.now()){let{message:e}=(0,O.kCb)("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw Error(e)}},this.isValidPing=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!(0,O.M_r)(e,!1)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if((0,O.BwD)(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=(0,O.kCb)("EXPIRED",`pairing topic: ${e}`);throw Error(t)}},this.core=e,this.logger=(0,w.Ep)(t,this.name),this.pairings=new tS(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,w.Fd)(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(eW.message,async e=>{let{topic:t,message:i}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;let r=await this.core.crypto.decode(t,i);try{(0,M.isJsonRpcRequest)(r)?(this.core.history.set(t,r),this.onRelayEventRequest({topic:t,payload:r})):(0,M.isJsonRpcResponse)(r)&&(await this.core.history.resolve(r),await this.onRelayEventResponse({topic:t,payload:r}),this.core.history.delete(t,r.id))}catch(e){this.logger.error(e)}})}registerExpirerEvents(){this.core.expirer.on(e2.expired,async e=>{let{topic:t}=(0,O.iPz)(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(e0.expire,{topic:t}))})}}class tP extends v{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new l.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=ez,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:i}),this.records.has(t.id))return;let r={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:i,expiry:(0,O.gn4)(p.THIRTY_DAYS)};this.records.set(r.id,r),this.persist(),this.events.emit(e1.created,r)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,M.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(e1.updated,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(i=>{i.topic!==e||"u">typeof t&&i.id!==t||(this.records.delete(i.id),this.events.emit(e1.deleted,i))}),this.persist()},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,w.Ep)(t,this.name)}get context(){return(0,w.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let i={topic:t.topic,request:(0,M.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(e1.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=(0,O.kCb)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(e1.created,e=>{let t=e1.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(e1.updated,e=>{let t=e1.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.events.on(e1.deleted,e=>{let t=e1.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})}),this.core.heartbeat.on(m,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(t=>{(0,p.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(e1.deleted,t,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}}class tC extends R{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new l.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=ez,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}},this.set=(e,t)=>{this.isInitialized();let i=this.formatTarget(e),r={target:i,expiry:t};this.expirations.set(i,r),this.checkExpiry(i,r),this.events.emit(e2.created,{target:i,expiration:r})},this.get=e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),i=this.getExpiration(t);this.expirations.delete(t),this.events.emit(e2.deleted,{target:t,expiration:i})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,w.Ep)(t,this.name)}get context(){return(0,w.Fd)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return(0,O.Z42)(e);if("number"==typeof e)return(0,O.GqV)(e);let{message:t}=(0,O.kCb)("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(e2.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=(0,O.kCb)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),Error(t)}return t}checkExpiry(e,t){let{expiry:i}=t;(0,p.toMiliseconds)(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(e2.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(m,()=>this.checkExpirations()),this.events.on(e2.created,e=>{let t=e2.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(e2.expired,e=>{let t=e2.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(e2.deleted,e=>{let t=e2.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}}}class tT extends P{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=e6,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async e=>{if(this.verifyDisabled||(0,O.b$m)()||!(0,O.jUY)())return;let t=this.getVerifyUrl(e?.verifyUrl);this.verifyUrl!==t&&this.removeIframe(),this.verifyUrl=t;try{await this.createIframe()}catch(e){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(e)}if(!this.initialized){this.removeIframe(),this.verifyUrl=e4;try{await this.createIframe()}catch(e){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(e),this.verifyDisabled=!0}}},this.register=async e=>{this.initialized?this.sendPost(e.attestationId):(this.addToQueue(e.attestationId),await this.init())},this.resolve=async e=>{let t;if(this.isDevEnv)return"";let i=this.getVerifyUrl(e?.verifyUrl);try{t=await this.fetchAttestation(e.attestationId,i)}catch(r){this.logger.info(`failed to resolve attestation: ${e.attestationId} from url: ${i}`),this.logger.info(r),t=await this.fetchAttestation(e.attestationId,e4)}return t},this.fetchAttestation=async(e,t)=>{this.logger.info(`resolving attestation: ${e} from url: ${t}`);let i=this.startAbortTimer(2*p.ONE_SECOND),r=await fetch(`${t}/attestation/${e}`,{signal:this.abortController.signal});return clearTimeout(i),200===r.status?await r.json():void 0},this.addToQueue=e=>{this.queue.push(e)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach(e=>this.sendPost(e)),this.queue=[])},this.sendPost=e=>{var t;try{if(!this.iframe)return;null==(t=this.iframe.contentWindow)||t.postMessage(e,"*"),this.logger.info(`postMessage sent: ${e} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let e;let t=i=>{"verify_ready"===i.data&&(this.onInit(),window.removeEventListener("message",t),e())};await Promise.race([new Promise(i=>{let r=document.getElementById(e6);if(r)return this.iframe=r,this.onInit(),i();window.addEventListener("message",t);let n=document.createElement("iframe");n.id=e6,n.src=`${this.verifyUrl}/${this.projectId}`,n.style.display="none",document.body.append(n),this.iframe=n,e=i}),new Promise((e,i)=>setTimeout(()=>{window.removeEventListener("message",t),i("verify iframe load timeout")},(0,p.toMiliseconds)(p.FIVE_SECONDS)))])},this.onInit=()=>{this.initialized=!0,this.processQueue()},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=e=>{let t=e||e5;return e3.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${e5}`),t=e5),t},this.logger=(0,w.Ep)(t,this.name),this.verifyUrl=e5,this.abortController=new AbortController,this.isDevEnv=(0,O.UGU)()&&j.env.IS_VITEST}get context(){return(0,w.Fd)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,p.toMiliseconds)(e))}}class tN extends C{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context="echo",this.registerDeviceToken=async e=>{let{clientId:t,token:i,notificationType:r,enableEncrypted:n=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await $()(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:r,token:i,always_raw:n})})},this.logger=(0,w.Ep)(t,this.context)}}var tk=Object.defineProperty,tA=Object.getOwnPropertySymbols,tO=Object.prototype.hasOwnProperty,tq=Object.prototype.propertyIsEnumerable,tD=(e,t,i)=>t in e?tk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,tM=(e,t)=>{for(var i in t||(t={}))tO.call(t,i)&&tD(e,i,t[i]);if(tA)for(var i of tA(t))tq.call(t,i)&&tD(e,i,t[i]);return e};class tU extends _{constructor(e){var t;super(e),this.protocol="wc",this.version=2,this.name=eB,this.events=new l.EventEmitter,this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||eH,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";let i=(0,w.jI)({level:"string"==typeof e?.logger&&e.logger?e.logger:e$.logger}),{logger:r,chunkLoggerController:n}=(0,w.Rt)({opts:i,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=n,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,w.Ep)(r,this.name),this.heartbeat=new y,this.crypto=new e9(this,this.logger,e?.keychain),this.history=new tP(this,this.logger),this.expirer=new tC(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new u.Z(tM(tM({},ej),e?.storageOptions)),this.relayer=new tw({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new tR(this,this.logger),this.verify=new tT(this.projectId||"",this.logger),this.echoClient=new tN(this.projectId||"",this.logger)}static async init(e){let t=new tU(e);await t.initialize();let i=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",i),t}get context(){return(0,w.Fd)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}let tL="client",tB=`wc@2:${tL}:`,tz={name:tL,logger:"error"},t$="WALLETCONNECT_DEEPLINK_CHOICE",tj=p.SEVEN_DAYS,tV={wc_sessionPropose:{req:{ttl:p.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:p.ONE_DAY,prompt:!1,tag:1104},res:{ttl:p.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:p.ONE_DAY,prompt:!1,tag:1106},res:{ttl:p.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:p.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:p.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:p.ONE_DAY,prompt:!1,tag:1112},res:{ttl:p.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:p.ONE_DAY,prompt:!1,tag:1114},res:{ttl:p.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:p.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:p.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:p.FIVE_MINUTES,prompt:!1,tag:1119}}},tF={min:p.FIVE_MINUTES,max:p.SEVEN_DAYS},tK={idle:"IDLE",active:"ACTIVE"},tH=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"],tJ="wc@1.5:auth:",tW=`${tJ}:PUB_KEY`;var tY=Object.defineProperty,tQ=Object.defineProperties,tG=Object.getOwnPropertyDescriptors,tZ=Object.getOwnPropertySymbols,tX=Object.prototype.hasOwnProperty,t0=Object.prototype.propertyIsEnumerable,t1=(e,t,i)=>t in e?tY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,t2=(e,t)=>{for(var i in t||(t={}))tX.call(t,i)&&t1(e,i,t[i]);if(tZ)for(var i of tZ(t))t0.call(t,i)&&t1(e,i,t[i]);return e},t6=(e,t)=>tQ(e,tG(t));class t5 extends N{constructor(e){super(e),this.name="engine",this.events=new(h()),this.initialized=!1,this.requestQueue={state:tK.idle,queue:[]},this.sessionRequestQueue={state:tK.idle,queue:[]},this.requestQueueDelay=p.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(tV)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,p.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{await this.isInitialized();let t=t6(t2({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);let{pairingTopic:i,requiredNamespaces:r,optionalNamespaces:n,sessionProperties:s,relays:o}=t,a=i,c,l=!1;try{a&&(l=this.client.core.pairing.pairings.get(a).active)}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${a}) failed`),e}if(!a||!l){let{topic:e,uri:t}=await this.client.core.pairing.create();a=e,c=t}if(!a){let{message:e}=(0,O.kCb)("NO_MATCHING_KEY",`connect() pairing topic: ${a}`);throw Error(e)}let h=await this.client.core.crypto.generateKeyPair(),u=tV.wc_sessionPropose.req.ttl||p.FIVE_MINUTES,d=(0,O.gn4)(u),g=t2({requiredNamespaces:r,optionalNamespaces:n,relays:o??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:d,pairingTopic:a},s&&{sessionProperties:s}),{reject:f,resolve:m,done:y}=(0,O.H1S)(u,"Proposal expired");this.events.once((0,O.E0T)("session_connect"),async({error:e,session:t})=>{if(e)f(e);else if(t){t.self.publicKey=h;let e=t6(t2({},t),{pairingTopic:g.pairingTopic,requiredNamespaces:g.requiredNamespaces,optionalNamespaces:g.optionalNamespaces});await this.client.session.set(t.topic,e),await this.setExpiry(t.topic,t.expiry),a&&await this.client.core.pairing.updateMetadata({topic:a,metadata:t.peer.metadata}),this.cleanupDuplicatePairings(e),m(e)}});let w=await this.sendRequest({topic:a,method:"wc_sessionPropose",params:g,throwOnFailedPublish:!0});return await this.setProposal(w,t2({id:w},g)),{uri:c,approval:y}},this.pair=async e=>{await this.isInitialized();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}},this.approve=async e=>{let t;await this.isInitialized();try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),e}let{id:i,relayProtocol:r,namespaces:n,sessionProperties:s,sessionConfig:o}=e;try{t=this.client.proposal.get(i)}catch(e){throw this.client.logger.error(`approve() -> proposal.get(${i}) failed`),e}let{pairingTopic:a,proposer:c,requiredNamespaces:l,optionalNamespaces:h}=t,u=await this.client.core.crypto.generateKeyPair(),p=c.publicKey,d=await this.client.core.crypto.generateSharedKey(u,p),g=t2(t2({relay:{protocol:r??"irn"},namespaces:n,controller:{publicKey:u,metadata:this.client.metadata},expiry:(0,O.gn4)(tj)},s&&{sessionProperties:s}),o&&{sessionConfig:o});await this.client.core.relayer.subscribe(d);let f=t6(t2({},g),{topic:d,requiredNamespaces:l,optionalNamespaces:h,pairingTopic:a,acknowledged:!1,self:g.controller,peer:{publicKey:c.publicKey,metadata:c.metadata},controller:u});await this.client.session.set(d,f);try{await this.sendResult({id:i,topic:a,result:{relay:{protocol:r??"irn"},responderPublicKey:u},throwOnFailedPublish:!0}),await this.sendRequest({topic:d,method:"wc_sessionSettle",params:g,throwOnFailedPublish:!0})}catch(e){throw this.client.logger.error(e),this.client.session.delete(d,(0,O.D6H)("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(d),e}return await this.client.core.pairing.updateMetadata({topic:a,metadata:c.metadata}),await this.client.proposal.delete(i,(0,O.D6H)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:a}),await this.setExpiry(d,(0,O.gn4)(tj)),{topic:d,acknowledged:()=>new Promise(e=>setTimeout(()=>e(this.client.session.get(d)),500))}},this.reject=async e=>{let t;await this.isInitialized();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}let{id:i,reason:r}=e;try{t=this.client.proposal.get(i).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),e}t&&(await this.sendError({id:i,topic:t,error:r,rpcOpts:tV.wc_sessionPropose.reject}),await this.client.proposal.delete(i,(0,O.D6H)("USER_DISCONNECTED")))},this.update=async e=>{await this.isInitialized();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}let{topic:t,namespaces:i}=e,{done:r,resolve:n,reject:s}=(0,O.H1S)(),o=(0,M.payloadId)(),a=(0,M.getBigIntRpcId)().toString(),c=this.client.session.get(t).namespaces;return this.events.once((0,O.E0T)("session_update",o),({error:e})=>{e?s(e):n()}),await this.client.session.update(t,{namespaces:i}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch(e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)}),{acknowledged:r}},this.extend=async e=>{await this.isInitialized();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}let{topic:t}=e,i=(0,M.payloadId)(),{done:r,resolve:n,reject:s}=(0,O.H1S)();return this.events.once((0,O.E0T)("session_extend",i),({error:e})=>{e?s(e):n()}),await this.setExpiry(t,(0,O.gn4)(tj)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(e=>{s(e)}),{acknowledged:r}},this.request=async e=>{await this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}let{chainId:t,request:i,topic:r,expiry:n=tV.wc_sessionRequest.req.ttl}=e,s=this.client.session.get(r),o=(0,M.payloadId)(),a=(0,M.getBigIntRpcId)().toString(),{done:c,resolve:l,reject:h}=(0,O.H1S)(n,"Request expired. Please try again.");return this.events.once((0,O.E0T)("session_request",o),({error:e,result:t})=>{e?h(e):l(t)}),await Promise.all([new Promise(async e=>{await this.sendRequest({clientRpcId:o,relayRpcId:a,topic:r,method:"wc_sessionRequest",params:{request:t6(t2({},i),{expiryTimestamp:(0,O.gn4)(n)}),chainId:t},expiry:n,throwOnFailedPublish:!0}).catch(e=>h(e)),this.client.events.emit("session_request_sent",{topic:r,request:i,chainId:t,id:o}),e()}),new Promise(async e=>{var t;if(!(null!=(t=s.sessionConfig)&&t.disableDeepLink)){let e=await (0,O.bW6)(this.client.core.storage,t$);(0,O.HhN)({id:o,topic:r,wcDeepLink:e})}e()}),c()]).then(e=>e[2])},this.respond=async e=>{await this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:i}=e,{id:r}=i;(0,M.isJsonRpcResult)(i)?await this.sendResult({id:r,topic:t,result:i.result,throwOnFailedPublish:!0}):(0,M.isJsonRpcError)(i)&&await this.sendError({id:r,topic:t,error:i.error}),this.cleanupAfterResponse(e)},this.ping=async e=>{await this.isInitialized();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=(0,M.payloadId)(),i=(0,M.getBigIntRpcId)().toString(),{done:r,resolve:n,reject:s}=(0,O.H1S)();this.events.once((0,O.E0T)("session_ping",e),({error:e})=>{e?s(e):n()}),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:i}),r()])}else this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.ping({topic:t})},this.emit=async e=>{await this.isInitialized(),await this.isValidEmit(e);let{topic:t,event:i,chainId:r}=e,n=(0,M.getBigIntRpcId)().toString();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:i,chainId:r},throwOnFailedPublish:!0,relayRpcId:n})},this.disconnect=async e=>{await this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:(0,O.D6H)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(t))await this.client.core.pairing.disconnect({topic:t});else{let{message:e}=(0,O.kCb)("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw Error(e)}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(0,O.Ih8)(t,e))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async e=>{this.isInitialized(),this.isValidAuthenticate(e);let{chains:t,statement:i="",uri:r,domain:n,nonce:s,type:o,exp:a,nbf:c,methods:l=[],expiry:h}=e,u=[...e.resources||[]],{topic:p,uri:d}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});this.client.logger.info({message:"Generated new pairing",pairing:{topic:p,uri:d}});let g=await this.client.core.crypto.generateKeyPair(),f=(0,O.YmJ)(g);if(await Promise.all([this.client.auth.authKeys.set(tW,{responseTopic:f,publicKey:g}),this.client.auth.pairingTopics.set(f,{topic:f,pairingTopic:p})]),await this.client.core.relayer.subscribe(f),this.client.logger.info(`sending request to new pairing topic: ${p}`),l.length>0){let{namespace:e}=(0,O.DQe)(t[0]),i=(0,O.IkP)(e,"request",l);(0,O.hA9)(u)&&(i=(0,O.qJM)(i,u.pop())),u.push(i)}let m=h&&h>tV.wc_sessionAuthenticate.req.ttl?h:tV.wc_sessionAuthenticate.req.ttl,y={authPayload:{type:o??"caip122",chains:t,statement:i,aud:r,domain:n,version:"1",nonce:s,iat:new Date().toISOString(),exp:a,nbf:c,resources:u},requester:{publicKey:g,metadata:this.client.metadata},expiryTimestamp:(0,O.gn4)(m)},w={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:t,methods:[...new Set(["personal_sign",...l])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:p,proposer:{publicKey:g,metadata:this.client.metadata},expiryTimestamp:(0,O.gn4)(tV.wc_sessionPropose.req.ttl)},{done:_,resolve:v,reject:b}=(0,O.H1S)(m,"Request expired"),E=async({error:e,session:t})=>{if(this.events.off((0,O.E0T)("session_request",x),I),e)b(e);else if(t){t.self.publicKey=g,await this.client.session.set(t.topic,t),await this.setExpiry(t.topic,t.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:t.peer.metadata});let e=this.client.session.get(t.topic);await this.deleteProposal(S),v({session:e})}},I=async e=>{let t;if(await this.deletePendingAuthRequest(x,{message:"fulfilled",code:0}),e.error){let t=(0,O.D6H)("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off((0,O.E0T)("session_connect"),E),b(e.error.message))}await this.deleteProposal(S),this.events.off((0,O.E0T)("session_connect"),E);let{cacaos:i,responder:r}=e.result,n=[],s=[];for(let e of i){await (0,O.c4l)({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),b((0,O.D6H)("SESSION_SETTLEMENT_FAILED","Signature verification failed")));let{p:t}=e,i=(0,O.hA9)(t.resources),r=[(0,O.DJo)(t.iss)],o=(0,O.NmC)(t.iss);if(i){let e=(0,O.Y31)(i),t=(0,O.ouN)(i);n.push(...e),r.push(...t)}for(let e of r)s.push(`${e}:${o}`)}let o=await this.client.core.crypto.generateSharedKey(g,r.publicKey);n.length>0&&(t={topic:o,acknowledged:!0,self:{publicKey:g,metadata:this.client.metadata},peer:r,controller:r.publicKey,expiry:(0,O.gn4)(tj),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:p,namespaces:(0,O.E12)([...new Set(n)],[...new Set(s)])},await this.client.core.relayer.subscribe(o),await this.client.session.set(o,t),t=this.client.session.get(o)),v({auths:i,session:t})},x=(0,M.payloadId)(),S=(0,M.payloadId)();this.events.once((0,O.E0T)("session_connect"),E),this.events.once((0,O.E0T)("session_request",x),I);try{await Promise.all([this.sendRequest({topic:p,method:"wc_sessionAuthenticate",params:y,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:x}),this.sendRequest({topic:p,method:"wc_sessionPropose",params:w,expiry:tV.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S})])}catch(e){throw this.events.off((0,O.E0T)("session_connect"),E),this.events.off((0,O.E0T)("session_request",x),I),e}return await this.setProposal(S,t2({id:S},w)),await this.setAuthRequest(x,{request:t6(t2({},y),{verifyContext:{}}),pairingTopic:p}),{uri:d,response:_}},this.approveSessionAuthenticate=async e=>{let t;this.isInitialized();let{id:i,auths:r}=e,n=this.getPendingAuthRequest(i);if(!n)throw Error(`Could not find pending auth request with id ${i}`);let s=n.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),a=(0,O.YmJ)(s),c={type:O.rVF,receiverPublicKey:s,senderPublicKey:o},l=[],h=[];for(let e of r){if(!await (0,O.c4l)({cacao:e,projectId:this.client.core.projectId})){let e=(0,O.D6H)("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:a,error:e,encodeOpts:c}),Error(e.message)}let{p:t}=e,r=(0,O.hA9)(t.resources),n=[(0,O.DJo)(t.iss)],s=(0,O.NmC)(t.iss);if(r){let e=(0,O.Y31)(r),t=(0,O.ouN)(r);l.push(...e),n.push(...t)}for(let e of n)h.push(`${e}:${s}`)}let u=await this.client.core.crypto.generateSharedKey(o,s);return l?.length>0&&(t={topic:u,acknowledged:!0,self:{publicKey:o,metadata:this.client.metadata},peer:{publicKey:s,metadata:n.requester.metadata},controller:s,expiry:(0,O.gn4)(tj),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:"",namespaces:(0,O.E12)([...new Set(l)],[...new Set(h)])},await this.client.core.relayer.subscribe(u),await this.client.session.set(u,t)),await this.sendResult({topic:a,id:i,result:{cacaos:r,responder:{publicKey:o,metadata:this.client.metadata}},encodeOpts:c,throwOnFailedPublish:!0}),await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:n.pairingTopic}),{session:t}},this.rejectSessionAuthenticate=async e=>{await this.isInitialized();let{id:t,reason:i}=e,r=this.getPendingAuthRequest(t);if(!r)throw Error(`Could not find pending auth request with id ${t}`);let n=r.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=(0,O.YmJ)(n),a={type:O.rVF,receiverPublicKey:n,senderPublicKey:s};await this.sendError({id:t,topic:o,error:i,encodeOpts:a,rpcOpts:tV.wc_sessionAuthenticate.reject}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,(0,O.D6H)("USER_DISCONNECTED"))},this.formatAuthMessage=e=>{this.isInitialized();let{request:t,iss:i}=e;return(0,O.wvx)(t,i)},this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(i=>{var r,n;return(null==(r=i.peerMetadata)?void 0:r.url)&&(null==(n=i.peerMetadata)?void 0:n.url)===e.peer.metadata.url&&i.topic&&i.topic!==t.topic});if(0===i.length)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}},this.deleteSession=async e=>{var t;let{topic:i,expirerHasDeleted:r=!1,emitEvent:n=!0,id:s=0}=e,{self:o}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,(0,O.D6H)("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),r||this.client.core.expirer.del(i),this.client.core.storage.removeItem(t$).catch(e=>this.client.logger.warn(e)),this.getPendingSessionRequests().forEach(e=>{e.topic===i&&this.deletePendingSessionRequest(e.id,(0,O.D6H)("USER_DISCONNECTED"))}),i===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=tK.idle),n&&this.client.events.emit("session_delete",{id:s,topic:i})},this.deleteProposal=async(e,t)=>{await Promise.all([this.client.proposal.delete(e,(0,O.D6H)("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")},this.deletePendingSessionRequest=async(e,t,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),i?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(t=>t.id!==e),i&&(this.sessionRequestQueue.state=tK.idle,this.client.events.emit("session_request_expire",{id:e}))},this.deletePendingAuthRequest=async(e,t,i=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),i?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))},this.setProposal=async(e,t)=>{this.client.core.expirer.set(e,(0,O.gn4)(tV.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)},this.setAuthRequest=async(e,t)=>{let{request:i,pairingTopic:r}=t;this.client.core.expirer.set(e,i.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:e,pairingTopic:r,verifyContext:i.verifyContext})},this.setPendingSessionRequest=async e=>{let{id:t,topic:i,params:r,verifyContext:n}=e,s=r.request.expiryTimestamp||(0,O.gn4)(tV.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:i,params:r,verifyContext:n})},this.sendRequest=async e=>{let t;let{topic:i,method:r,params:n,expiry:s,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c}=e,l=(0,M.formatJsonRpcRequest)(r,n,a);if((0,O.jUY)()&&tH.includes(r)){let e=(0,O.rjm)(JSON.stringify(l));this.client.core.verify.register({attestationId:e})}try{t=await this.client.core.crypto.encode(i,l)}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),e}let h=tV[r].req;return s&&(h.ttl=s),o&&(h.id=o),this.client.core.history.set(i,l),c?(h.internal=t6(t2({},h.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,t,h)):this.client.core.relayer.publish(i,t,h).catch(e=>this.client.logger.error(e)),l.id},this.sendResult=async e=>{let t,i;let{id:r,topic:n,result:s,throwOnFailedPublish:o,encodeOpts:a}=e,c=(0,M.formatJsonRpcResult)(r,s);try{t=await this.client.core.crypto.encode(n,c,a)}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),e}try{i=await this.client.core.history.get(n,r)}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${r}) failed`),e}let l=tV[i.request.method].res;o?(l.internal=t6(t2({},l.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,t,l)):this.client.core.relayer.publish(n,t,l).catch(e=>this.client.logger.error(e)),await this.client.core.history.resolve(c)},this.sendError=async e=>{let t,i;let{id:r,topic:n,error:s,encodeOpts:o,rpcOpts:a}=e,c=(0,M.formatJsonRpcError)(r,s);try{t=await this.client.core.crypto.encode(n,c,o)}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),e}try{i=await this.client.core.history.get(n,r)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${n}, ${r}) failed`),e}let l=a||tV[i.request.method].res;this.client.core.relayer.publish(n,t,l),await this.client.core.history.resolve(c)},this.cleanup=async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{let i=!1;(0,O.BwD)(t.expiry)&&(i=!0),this.client.core.crypto.keychain.has(t.topic)||(i=!0),i&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{(0,O.BwD)(e.expiryTimestamp)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession({topic:e})),...t.map(e=>this.deleteProposal(e))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===tK.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=tK.active;let e=this.requestQueue.queue.shift();if(e)try{this.processRequest(e),await new Promise(e=>setTimeout(e,300))}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=tK.idle},this.processRequest=e=>{let{topic:t,payload:i}=e,r=i.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:r}))switch(r){case"wc_sessionPropose":return this.onSessionProposeRequest(t,i);case"wc_sessionSettle":return this.onSessionSettleRequest(t,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(t,i);case"wc_sessionExtend":return this.onSessionExtendRequest(t,i);case"wc_sessionPing":return this.onSessionPingRequest(t,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(t,i);case"wc_sessionRequest":return this.onSessionRequest(t,i);case"wc_sessionEvent":return this.onSessionEventRequest(t,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateRequest(t,i);default:return this.client.logger.info(`Unsupported request method ${r}`)}},this.onRelayEventResponse=async e=>{let{topic:t,payload:i}=e,r=(await this.client.core.history.get(t,i.id)).request.method;switch(r){case"wc_sessionPropose":return this.onSessionProposeResponse(t,i);case"wc_sessionSettle":return this.onSessionSettleResponse(t,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,i);case"wc_sessionExtend":return this.onSessionExtendResponse(t,i);case"wc_sessionPing":return this.onSessionPingResponse(t,i);case"wc_sessionRequest":return this.onSessionRequestResponse(t,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,i);default:return this.client.logger.info(`Unsupported response method ${r}`)}},this.onRelayEventUnknownPayload=e=>{let{topic:t}=e,{message:i}=(0,O.kCb)("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(i)},this.shouldIgnorePairingRequest=e=>{let{topic:t,requestMethod:i}=e,r=this.expectedPairingMethodMap.get(t);return!(!r||r.includes(i))&&!!(r.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async(e,t)=>{let{params:i,id:r}=t;try{this.isValidConnect(t2({},t.params));let n=i.expiryTimestamp||(0,O.gn4)(tV.wc_sessionPropose.req.ttl),s=t2({id:r,pairingTopic:e,expiryTimestamp:n},i);await this.setProposal(r,s);let o=(0,O.rjm)(JSON.stringify(t)),a=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:r,params:s,verifyContext:a})}catch(t){await this.sendError({id:r,topic:e,error:t,rpcOpts:tV.wc_sessionPropose.autoReject}),this.client.logger.error(t)}},this.onSessionProposeResponse=async(e,t)=>{let{id:i}=t;if((0,M.isJsonRpcResult)(t)){let{result:r}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:r});let n=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:n});let s=n.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});let o=r.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});let a=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});let c=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:e})}else if((0,M.isJsonRpcError)(t)){await this.client.proposal.delete(i,(0,O.D6H)("USER_DISCONNECTED"));let e=(0,O.E0T)("session_connect");if(0===this.events.listenerCount(e))throw Error(`emitting ${e} without any listeners, 954`);this.events.emit((0,O.E0T)("session_connect"),{error:t.error})}},this.onSessionSettleRequest=async(e,t)=>{let{id:i,params:r}=t;try{this.isValidSessionSettleRequest(r);let{relay:i,controller:n,expiry:s,namespaces:o,sessionProperties:a,sessionConfig:c}=t.params,l=t2(t2({topic:e,relay:i,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:n.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:n.publicKey,metadata:n.metadata}},a&&{sessionProperties:a}),c&&{sessionConfig:c});await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0});let h=(0,O.E0T)("session_connect");if(0===this.events.listenerCount(h))throw Error(`emitting ${h} without any listeners 997`);this.events.emit((0,O.E0T)("session_connect"),{session:l})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionSettleResponse=async(e,t)=>{let{id:i}=t;(0,M.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit((0,O.E0T)("session_approve",i),{})):(0,M.isJsonRpcError)(t)&&(await this.client.session.delete(e,(0,O.D6H)("USER_DISCONNECTED")),this.events.emit((0,O.E0T)("session_approve",i),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{let{params:i,id:r}=t;try{let t=`${e}_session_update`,n=O.O6B.get(t);if(n&&this.isRequestOutOfSync(n,r)){this.client.logger.info(`Discarding out of sync request - ${r}`),this.sendError({id:r,topic:e,error:(0,O.D6H)("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(t2({topic:e},i));try{O.O6B.set(t,r),await this.client.session.update(e,{namespaces:i.namespaces}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw O.O6B.delete(t),e}this.client.events.emit("session_update",{id:r,topic:e,params:i})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.isRequestOutOfSync=(e,t)=>parseInt(t.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,t)=>{let{id:i}=t,r=(0,O.E0T)("session_update",i);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);(0,M.isJsonRpcResult)(t)?this.events.emit((0,O.E0T)("session_update",i),{}):(0,M.isJsonRpcError)(t)&&this.events.emit((0,O.E0T)("session_update",i),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{let{id:i}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,(0,O.gn4)(tj)),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:e})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionExtendResponse=(e,t)=>{let{id:i}=t,r=(0,O.E0T)("session_extend",i);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);(0,M.isJsonRpcResult)(t)?this.events.emit((0,O.E0T)("session_extend",i),{}):(0,M.isJsonRpcError)(t)&&this.events.emit((0,O.E0T)("session_extend",i),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{let{id:i}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:e})}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionPingResponse=(e,t)=>{let{id:i}=t,r=(0,O.E0T)("session_ping",i);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);setTimeout(()=>{(0,M.isJsonRpcResult)(t)?this.events.emit((0,O.E0T)("session_ping",i),{}):(0,M.isJsonRpcError)(t)&&this.events.emit((0,O.E0T)("session_ping",i),{error:t.error})},500)},this.onSessionDeleteRequest=async(e,t)=>{let{id:i}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),await Promise.all([new Promise(t=>{this.client.core.relayer.once(eW.publish,async()=>{t(await this.deleteSession({topic:e,id:i}))})}),this.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:(0,O.D6H)("USER_DISCONNECTED")})])}catch(e){this.client.logger.error(e)}},this.onSessionRequest=async(e,t)=>{var i;let{id:r,params:n}=t;try{await this.isValidRequest(t2({topic:e},n));let t=(0,O.rjm)(JSON.stringify((0,M.formatJsonRpcRequest)("wc_sessionRequest",n,r))),s=this.client.session.get(e),o=await this.getVerifyContext(t,s.peer.metadata),a={id:r,topic:e,params:n,verifyContext:o};await this.setPendingSessionRequest(a),null!=(i=this.client.signConfig)&&i.disableRequestQueue?this.emitSessionRequest(a):(this.addSessionRequestToSessionRequestQueue(a),this.processSessionRequestQueue())}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionRequestResponse=(e,t)=>{let{id:i}=t,r=(0,O.E0T)("session_request",i);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);(0,M.isJsonRpcResult)(t)?this.events.emit((0,O.E0T)("session_request",i),{result:t.result}):(0,M.isJsonRpcError)(t)&&this.events.emit((0,O.E0T)("session_request",i),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{let{id:i,params:r}=t;try{let t=`${e}_session_event_${r.event.name}`,n=O.O6B.get(t);if(n&&this.isRequestOutOfSync(n,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(t2({topic:e},r)),this.client.events.emit("session_event",{id:i,topic:e,params:r}),O.O6B.set(t,i)}catch(t){await this.sendError({id:i,topic:e,error:t}),this.client.logger.error(t)}},this.onSessionAuthenticateResponse=(e,t)=>{let{id:i}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),(0,M.isJsonRpcResult)(t)?this.events.emit((0,O.E0T)("session_request",i),{result:t.result}):(0,M.isJsonRpcError)(t)&&this.events.emit((0,O.E0T)("session_request",i),{error:t.error})},this.onSessionAuthenticateRequest=async(e,t)=>{try{let{requester:i,authPayload:r,expiryTimestamp:n}=t.params,s=(0,O.rjm)(JSON.stringify(t)),o=await this.getVerifyContext(s,this.client.metadata),a={requester:i,pairingTopic:e,id:t.id,authPayload:r,verifyContext:o,expiryTimestamp:n};await this.setAuthRequest(t.id,{request:a,pairingTopic:e}),this.client.events.emit("session_authenticate",{topic:e,params:t.params,id:t.id})}catch(s){this.client.logger.error(s);let i=t.params.requester.publicKey,r=await this.client.core.crypto.generateKeyPair(),n={type:O.rVF,receiverPublicKey:i,senderPublicKey:r};await this.sendError({id:t.id,topic:e,error:s,encodeOpts:n,rpcOpts:tV.wc_sessionAuthenticate.autoReject})}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=tK.idle,this.processSessionRequestQueue()},(0,p.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:e,error:t})=>{let i=this.client.core.history.pending;i.length>0&&i.filter(t=>t.topic===e&&"wc_sessionRequest"===t.request.method).forEach(e=>{let i=e.request.id,r=(0,O.E0T)("session_request",i);if(0===this.events.listenerCount(r))throw Error(`emitting ${r} without any listeners`);this.events.emit((0,O.E0T)("session_request",e.request.id),{error:t})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===tK.active){this.client.logger.info("session request queue is already active.");return}let e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=tK.active,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}},this.emitSessionRequest=e=>{this.client.events.emit("session_request",e)},this.onPairingCreated=e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;let t=this.client.proposal.getAll().find(t=>t.pairingTopic===e.topic);t&&this.onSessionProposeRequest(e.topic,(0,M.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties},t.id))},this.isValidConnect=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:t,requiredNamespaces:i,optionalNamespaces:r,sessionProperties:n,relays:s}=e;if((0,O.o8e)(t)||await this.isValidPairingTopic(t),!(0,O.PMr)(s,!0)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`connect() relays: ${s}`);throw Error(e)}(0,O.o8e)(i)||0===(0,O.L5o)(i)||this.validateNamespaces(i,"requiredNamespaces"),(0,O.o8e)(r)||0===(0,O.L5o)(r)||this.validateNamespaces(r,"optionalNamespaces"),(0,O.o8e)(n)||this.validateSessionProps(n,"sessionProperties")},this.validateNamespaces=(e,t)=>{let i=(0,O.naP)(e,"connect()",t);if(i)throw Error(i.message)},this.isValidApprove=async e=>{if(!(0,O.EJd)(e))throw Error((0,O.kCb)("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:i,relayProtocol:r,sessionProperties:n}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);let s=this.client.proposal.get(t),o=(0,O.ing)(i,"approve()");if(o)throw Error(o.message);let a=(0,O.rFo)(s.requiredNamespaces,i,"approve()");if(a)throw Error(a.message);if(!(0,O.M_r)(r,!0)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`approve() relayProtocol: ${r}`);throw Error(e)}(0,O.o8e)(n)||this.validateSessionProps(n,"sessionProperties")},this.isValidReject=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:i}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!(0,O.H4H)(i)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw Error(e)}},this.isValidSessionSettleRequest=e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:t,controller:i,namespaces:r,expiry:n}=e;if(!(0,O.Z26)(t)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let s=(0,O.DdM)(i,"onSessionSettleRequest()");if(s)throw Error(s.message);let o=(0,O.ing)(r,"onSessionSettleRequest()");if(o)throw Error(o.message);if((0,O.BwD)(n)){let{message:e}=(0,O.kCb)("EXPIRED","onSessionSettleRequest()");throw Error(e)}},this.isValidUpdate=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:i}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let r=this.client.session.get(t),n=(0,O.ing)(i,"update()");if(n)throw Error(n.message);let s=(0,O.rFo)(r.requiredNamespaces,i,"update()");if(s)throw Error(s.message)},this.isValidExtend=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:t,request:i,chainId:r,expiry:n}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);let{namespaces:s}=this.client.session.get(t);if(!(0,O.p8o)(s,r)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`request() chainId: ${r}`);throw Error(e)}if(!(0,O.hHR)(i)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw Error(e)}if(!(0,O.alS)(s,r,i.method)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`request() method: ${i.method}`);throw Error(e)}if(n&&!(0,O.ONw)(n,tF)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`request() expiry: ${n}. Expiry must be a number (in seconds) between ${tF.min} and ${tF.max}`);throw Error(e)}},this.isValidRespond=async e=>{var t;if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:i,response:r}=e;try{await this.isValidSessionTopic(i)}catch(i){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),i}if(!(0,O.JTI)(r)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw Error(e)}},this.isValidPing=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:t,event:i,chainId:r}=e;await this.isValidSessionTopic(t);let{namespaces:n}=this.client.session.get(t);if(!(0,O.p8o)(n,r)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`emit() chainId: ${r}`);throw Error(e)}if(!(0,O.nfW)(i)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}if(!(0,O.B95)(n,r,i.name)){let{message:e}=(0,O.kCb)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw Error(e)}},this.isValidDisconnect=async e=>{if(!(0,O.EJd)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidAuthenticate=e=>{let{chains:t,uri:i,domain:r,nonce:n}=e;if(!Array.isArray(t)||0===t.length)throw Error("chains is required and must be a non-empty array");if(!(0,O.M_r)(i,!1))throw Error("uri is required parameter");if(!(0,O.M_r)(r,!1))throw Error("domain is required parameter");if(!(0,O.M_r)(n,!1))throw Error("nonce is required parameter");if([...new Set(t.map(e=>(0,O.DQe)(e).namespace))].length>1)throw Error("Multi-namespace requests are not supported. Please request single namespace only.");let{namespace:s}=(0,O.DQe)(t[0]);if("eip155"!==s)throw Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async(e,t)=>{let i={verified:{verifyUrl:t.verifyUrl||e5,validation:"UNKNOWN",origin:t.url||""}};try{let r=await this.client.core.verify.resolve({attestationId:e,verifyUrl:t.verifyUrl});r&&(i.verified.origin=r.origin,i.verified.isScam=r.isScam,i.verified.validation=r.origin===new URL(t.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.info(e)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(e,t)=>{Object.values(e).forEach(e=>{if(!(0,O.M_r)(e,!1)){let{message:i}=(0,O.kCb)("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw Error(i)}})},this.getPendingAuthRequest=e=>{let t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0},this.addToRecentlyDeleted=(e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0,t=this.recentlyDeletedLimit/2;for(let i of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(i)}}},this.checkRecentlyDeleted=e=>{let t=this.recentlyDeletedMap.get(e);if(t){let{message:i}=(0,O.kCb)("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw Error(i)}}}async isInitialized(){if(!this.initialized){let{message:e}=(0,O.kCb)("NOT_INITIALIZED",this.name);throw Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(eW.message,async e=>{let{topic:t,message:i}=e,{publicKey:r}=this.client.auth.authKeys.keys.includes(tW)?this.client.auth.authKeys.get(tW):{responseTopic:void 0,publicKey:void 0},n=await this.client.core.crypto.decode(t,i,{receiverPublicKey:r});try{(0,M.isJsonRpcRequest)(n)?(this.client.core.history.set(t,n),this.onRelayEventRequest({topic:t,payload:n})):(0,M.isJsonRpcResponse)(n)?(await this.client.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.client.core.history.delete(t,n.id)):this.onRelayEventUnknownPayload({topic:t,payload:n})}catch(e){this.client.logger.error(e)}})}registerExpirerEvents(){this.client.core.expirer.on(e2.expired,async e=>{let{topic:t,id:i}=(0,O.iPz)(e.target);return i&&this.client.pendingRequest.keys.includes(i)?await this.deletePendingSessionRequest(i,(0,O.kCb)("EXPIRED"),!0):i&&this.client.auth.requests.keys.includes(i)?await this.deletePendingAuthRequest(i,(0,O.kCb)("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i})))})}registerPairingEvents(){this.client.core.pairing.events.on(e0.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(e0.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!(0,O.M_r)(e,!1)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if((0,O.BwD)(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=(0,O.kCb)("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!(0,O.M_r)(e,!1)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if((0,O.BwD)(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});let{message:t}=(0,O.kCb)("EXPIRED",`session topic: ${e}`);throw Error(t)}if(!this.client.core.crypto.keychain.has(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if((0,O.M_r)(e,!1)){let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if(!(0,O.Q01)(e)){let{message:t}=(0,O.kCb)("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=(0,O.kCb)("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if((0,O.BwD)(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);let{message:t}=(0,O.kCb)("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class t4 extends tS{constructor(e,t){super(e,t,"proposal",tB),this.core=e,this.logger=t}}class t3 extends tS{constructor(e,t){super(e,t,"session",tB),this.core=e,this.logger=t}}class t8 extends tS{constructor(e,t){super(e,t,"request",tB,e=>e.id),this.core=e,this.logger=t}}class t9 extends tS{constructor(e,t){super(e,t,"authKeys",tJ,()=>tW),this.core=e,this.logger=t}}class t7 extends tS{constructor(e,t){super(e,t,"pairingTopics",tJ),this.core=e,this.logger=t}}class ie extends tS{constructor(e,t){super(e,t,"requests",tJ,e=>e.id),this.core=e,this.logger=t}}class it{constructor(e,t){this.core=e,this.logger=t,this.authKeys=new t9(this.core,this.logger),this.pairingTopics=new t7(this.core,this.logger),this.requests=new ie(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class ii extends T{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=tz.name,this.events=new l.EventEmitter,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}},this.update=async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}},this.request=async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}},this.find=e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.authenticate=async e=>{try{return await this.engine.authenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.formatAuthMessage=e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}},this.approveSessionAuthenticate=async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.rejectSessionAuthenticate=async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}},this.name=e?.name||tz.name,this.metadata=e?.metadata||(0,O.DaH)(),this.signConfig=e?.signConfig;let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,w.gw)((0,w.jI)({level:e?.logger||tz.logger}));this.core=e?.core||new tU(e),this.logger=(0,w.Ep)(t,this.name),this.session=new t3(this.core,this.logger),this.proposal=new t4(this.core,this.logger),this.pendingRequest=new t8(this.core,this.logger),this.engine=new t5(this),this.auth=new it(this.core,this.logger)}static async init(e){let t=new ii(e);return await t.initialize(),t}get context(){return(0,w.Fd)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var ir=i(60636);class is extends Error{constructor(){super(),Object.setPrototypeOf(this,is.prototype)}}class io extends Error{constructor(){super(),Object.setPrototypeOf(this,io.prototype)}}var ia=i(46385).Buffer;(r=s||(s={})).Mainnet="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",r.Devnet="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K",(n=o||(o={})).signTransaction="solana_signTransaction",n.signMessage="solana_signMessage";let ic=e=>({requiredNamespaces:{solana:{chains:[e],methods:[o.signTransaction,o.signMessage],events:[]}}}),il=e=>"version"in e;class ih{constructor(e){this._options=e.options,this._network=e.network}async connect(){let e=this._client??await ii.init(this._options),t=e.find(ic(this._network)).filter(e=>e.acknowledged);if(t.length)return this._session=t[t.length-1],this._client=e,{publicKey:this.publicKey};{let{uri:t,approval:i}=await e.connect(ic(this._network));return new Promise((r,n)=>{t&&c.open(t,()=>{n(new io)}),i().then(t=>{this._session=t,this._client=e,r({publicKey:this.publicKey})}).catch(n).finally(()=>{c.close()})})}}async disconnect(){if(this._client&&this._session)await this._client.disconnect({topic:this._session.topic,reason:(0,O.D6H)("USER_DISCONNECTED")}),this._session=void 0;else throw new is}get client(){if(this._client)return Object.assign({},this._client,{off:this._client.removeListener});throw new is}get publicKey(){if(this._client&&this._session){let{address:e}=(0,O.cwA)(this._session.namespaces.solana.accounts[0]);return new a.PublicKey(e)}throw new is}async signTransaction(e){if(this._client&&this._session){let t,i;il(e)?(t=ia.from(e.serialize()).toString("base64"),"legacy"===e.version&&(i=a.Transaction.from(e.serialize()))):(t=e.serialize({requireAllSignatures:!1,verifySignatures:!1}).toString("base64"),i=e);let{signature:r}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:o.signTransaction,params:{...i,transaction:t}}});return e.addSignature(this.publicKey,ia.from(ir.decode(r))),e}throw new is}async signMessage(e){if(this._client&&this._session){let{signature:t}=await this._client.request({chainId:this._network,topic:this._session.topic,request:{method:o.signMessage,params:{pubkey:this.publicKey.toString(),message:ir.encode(e)}}});return ir.decode(t)}throw new is}}},4413:function(e,t,i){"use strict";function r(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function n(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let i=r(t),n=0;for(let t of e)i.set(t,n),n+=t.length;return i}i.d(t,{zo:function(){return n},mL:function(){return h},BB:function(){return u}});var s=i(11489);function o(e,t,i,r){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:i},decoder:{decode:r}}}let a=o("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),c=o("ascii","a",e=>{let t="a";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e=>{let t=r((e=e.substring(1)).length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}),l={utf8:a,"utf-8":a,hex:s.gh.base16,latin1:c,ascii:c,binary:c,...s.gh};function h(e,t="utf8"){let i=l[t];if(!i)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e,"utf8"):i.decoder.decode(`${i.prefix}${e}`)}function u(e,t="utf8"){let i=l[t];if(!i)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):i.encoder.encode(e).substring(1)}}}]);
//# sourceMappingURL=7636.d4f96011dee2f9de.js.map